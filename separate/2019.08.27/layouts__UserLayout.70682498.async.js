(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{BOD2:function(e,a,t){e.exports={container:"container___3rwDa",content:"content___3Paa8",top:"top___1W42Y",header:"header___1cl15",logo:"logo___29nS6",title:"title___3DxND",desc:"desc___2YLHe"}},jH8a:function(e,a,t){"use strict";var r=t("tAuX"),n=t("g09b");Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,t("miYZ");var o=n(t("tsqr")),l=n(t("Y/ft")),i=r(t("q1tI")),c=t("nsBq"),u=n(t("BOD2")),s=n(t("Qyje")),d=t("+n12");class g extends i.default.PureComponent{constructor(){super(...arguments),this.handleModelManageMenu=(e=>{e=e.filter(e=>"\u6570\u636e\u6982\u89c8"!==e.name&&"\u68c0\u6838\u89c4\u5219\u7ba1\u7406"!==e.name),e=e.map(e=>{var a=e;return delete a.iconUrl,a});var a,t,r,n=[],o=(0,d.arrayDataToTree)(e);o[0].children.forEach(e=>{"\u5143\u6570\u636e\u7ba1\u7406"!==e.name&&"\u8d44\u6e90\u76ee\u5f55"!==e.name&&"\u6a21\u578b\u7ba1\u7406"!==e.name||n.push(e),"\u5143\u6570\u636e\u7ba1\u7406"===e.name&&(t=e.id),"\u6570\u636e\u6807\u51c6\u7ba1\u7406"===e.name&&(a=e.children)}),a&&(a=a.map(e=>{var a=e;return a.parentId=t,a.url=a.url.replace(/\/[^\/]*\//g,"/yuanData/"),e.children&&e.children.forEach(e=>{e.url=e.url.replace(/\/[^\/]*\//g,"/yuanData/")}),a}),r=a[a.length-1],a.pop()),e.forEach(e=>{"\u6570\u636e\u5ba1\u6838\u7ba1\u7406"===e.name&&n.push(e)}),n.forEach((e,t)=>{"\u5143\u6570\u636e\u7ba1\u7406"===e.name&&(n[t].children=[...a,...e.children,r])});var i=0;e.forEach(e=>{"\u6570\u636e\u6a21\u578b"===e.name&&n.unshift(e),"\u4e2d\u5fc3\u5e93"===e.name&&0===i&&(n.unshift(e),i+=1)});var c=n.filter(e=>"\u6a21\u578b\u7ba1\u7406"!==e.name);if("undefined"!==(0,d.getQueryString)("state")){var u=JSON.parse(decodeURI((0,d.getQueryString)("state"))),g=u.path,h=(0,l.default)(u,["path"]);"localhost"===location.hostname?(console.log("localhost"),window.location.href="/#".concat(g,"?").concat(s.default.stringify(h))):(console.log("deal"),console.log(u),window.location.href="/dataManage/#".concat(g,"?").concat(s.default.stringify(h)))}return c}),this.handleMasterDataManageMenu=(e=>{var a=[],t=(0,d.arrayDataToTree)(e);return t[0].children.forEach(e=>{"\u4e3b\u6570\u636e\u7ba1\u7406"===e.name&&(a=e.children)}),a}),this.handleQualityManageMenu=(e=>{e=(0,d.arrayDataToTree)(e);var a=[];return e[0].children.forEach(e=>{"\u6570\u636e\u8d28\u91cf\u7ba1\u7406"===e.name&&(a=e.children)}),a}),this.handleSystemManageMenu=(e=>{e=(0,d.arrayDataToTree)(e);var a=[];return e[0].children.forEach(e=>{"\u7cfb\u7edf\u7ba1\u7406"===e.name&&(a=e.children)}),a})}componentDidMount(){var e="undefined"===(0,d.getQueryString)("state")||!1;if((0,d.getQueryString)("isIframe")){sessionStorage.isIframe=!0,localStorage.nameCn=decodeURI((0,d.getQueryString)("nameCn")),localStorage.token=(0,d.getQueryString)("token"),localStorage.userID=(0,d.getQueryString)("userID"),localStorage.userName=(0,d.getQueryString)("userName"),localStorage.authority=(0,d.getQueryString)("authority"),localStorage.admin="admin"===(0,d.getQueryString)("authority")||!1,localStorage.module=(0,d.getQueryString)("module");var a={accountId:(0,d.getQueryString)("userID"),token:(0,d.getQueryString)("token")};(0,c.getMenu)(a).then(a=>{if(a.success){var t,r=!0;switch((0,d.getQueryString)("module")){case"ModelManage":t=this.handleModelManageMenu(a.obj),r=e;break;case"MasterDataManage":t=this.handleMasterDataManageMenu(a.obj);break;case"QualityManage":t=this.handleQualityManageMenu(a.obj);break;case"SystemManage":t=this.handleSystemManageMenu(a.obj);break;default:t=[];break}location.hash.startsWith("#/resourceDirectory/resourceDetails")&&localStorage.menu!==JSON.stringify(t)&&(window.location.href=location.href),localStorage.menu=JSON.stringify(t),r&&("localhost"===location.hostname?window.location.href="/":window.location.href="/dataManage")}else o.default.error(a.msg)})}}render(){return(0,d.getQueryString)("isIframe")?"":i.default.createElement("div",{className:u.default.container},i.default.createElement("div",{className:u.default.content},i.default.createElement(i.Fragment,null,i.default.createElement("div",{className:u.default.top},i.default.createElement("div",{className:u.default.header},i.default.createElement("span",{className:u.default.title},window.config.schoolName,"-\u6570\u636e\u6cbb\u7406\u5e73\u53f0"))),this.props.children)))}}var h=g;a.default=h}}]);