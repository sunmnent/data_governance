(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[23],{kr3q:function(t,a,e){"use strict";var i=e("g09b"),s=e("tAuX");Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,e("g9YV");var l=i(e("wCAj"));e("+L6B");var o,n,d,r=i(e("2/Rp")),p=i(e("p0pE")),h=s(e("q1tI")),c=e("MuoO"),u=e("7DNP"),g=i(e("Qyje")),m=10,v=(o=(0,c.connect)(t=>{var a=t.dataRelationship,e=t.loading;return{dataRelationship:a,loading:e}}),o((d=class extends h.Component{constructor(){super(...arguments),this.columns=[{title:"\u5e8f\u53f7",dataIndex:"code",render:(t,a,e)=>{var i=this.props.dataRelationship.logObj.pageNum;return e+(i-1)*m+1},width:"5%"},{title:"\u4efb\u52a1",dataIndex:"taskName",width:"20%",render:(t,a,e)=>{return h.default.createElement("div",{className:"can-click",onClick:this.loadDetailedLog.bind(this,a.path)},t)}},{title:"\u4efb\u52a1\u7c7b\u578b",dataIndex:"taskTypeDesc",width:"10%"},{title:"\u72b6\u6001",dataIndex:"statusDesc",width:"10%"},{title:"\u603b\u8bb0\u5f55\u6570",dataIndex:"totalRows",width:"10%"},{title:"\u5931\u8d25\u8bb0\u5f55\u6570",dataIndex:"failRows",width:"10%"},{title:"\u5f00\u59cb\u65f6\u95f4",dataIndex:"startTime",width:"10%"},{title:"\u7ed3\u675f\u65f6\u95f4",dataIndex:"endTime",width:"10%"}],this.logWatch=(t=>{3===t.status&&(this.interval=setInterval(()=>{this.props.dispatch({type:"dataRelationship/logStateChange",payload:{id:t.id}}).then(t=>{var a=t.statusDesc,e=t.endTime;if(3!==t.status){var i=this.props.dataRelationship.logObj;i.list[0]||(i.list[0]={}),i.list[0].statusDesc=a,i.list[0].endTime=e,this.props.dispatch({type:"dataRelationship/save",payload:{logObj:i}}),this.interval&&clearInterval(this.interval)}})},8e3))}),this.goBack=(()=>{this.props.dispatch(u.routerRedux.goBack())}),this.loadDetailedLog=(t=>{this.props.dispatch(u.routerRedux.push("/dataPreprocessing/detailedLog?path=".concat(t)))}),this.changePage=((t,a,e)=>{this.interval&&clearInterval(this.interval);var i=this.props.dataRelationship.logObj.params;this.props.dispatch({type:"dataRelationship/getLog",payload:(0,p.default)({},i,{pageNum:t.current})})})}componentDidMount(){var t=this.props,a=t.location,e=t.match,i=e.params.log,s=g.default.parse(a.search,{ignoreQueryPrefix:!0}).logType||"1";this.props.dispatch({type:"dataRelationship/getLog",payload:{pageNum:1,pageSize:m,id:i,logType:s}}).then(t=>{t&&t.list&&t.list.length&&this.logWatch(t.list[0])})}componentWillUnmount(){this.interval&&clearInterval(this.interval)}render(){var t=this.props.dataRelationship.logObj,a=t.list,e=t.pageNum,i=t.total;return h.default.createElement("div",null,h.default.createElement(r.default,{style:{marginBottom:10},onClick:this.goBack},"\u8fd4\u56de"),h.default.createElement(l.default,{onChange:this.changePage,columns:this.columns,dataSource:a,pagination:{total:i,current:e,pageSize:m},loading:this.props.loading.effects["dataRelationship/getLog"],rowKey:"id"}))}},n=d))||n),w=v;a.default=w}}]);