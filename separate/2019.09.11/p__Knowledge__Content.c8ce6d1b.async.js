(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[34],{lg70:function(e,t,a){"use strict";var l=a("g09b"),i=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("g9YV");var n=l(a("wCAj"));a("+L6B");var s=l(a("2/Rp"));a("5NDa");var d=l(a("5rEg"));a("2qtc");var o=l(a("kLXV"));a("Pwec");var r=l(a("CtXQ"));a("OaEy");var u=l(a("2fM7"));a("y8nQ");var c,m,p,f=l(a("Vl3Y")),h=i(a("q1tI")),g=a("MuoO"),b=l(a("mNzB")),k=f.default.Item,v=u.default.Option,y=10,E=(c=(0,g.connect)(e=>{var t=e.knowledge,a=e.loading;return{knowledge:t,loading:a}}),c((p=class extends h.Component{constructor(){super(...arguments),this.state={modalVisible:!1,modalDisabled:!1,modalContent:{}},this.columns=[{title:"\u6807\u9898",dataIndex:"title",key:"title"},{title:"\u5206\u7c7b",dataIndex:"classificationName",key:"classificationName"},{title:"\u521b\u5efa\u4eba",dataIndex:"username",key:"username"},{title:"\u521b\u5efa\u65f6\u95f4",key:"createTime",dataIndex:"createTime"},{title:"\u64cd\u4f5c",key:"action",render:(e,t)=>h.default.createElement("div",null,h.default.createElement(r.default,{type:"eye",title:"\u8be6\u7ec6",onClick:this.showModal.bind(this,t,!0),style:{marginRight:"1em"},className:"can-click"}),h.default.createElement(r.default,{type:"edit",title:"\u7f16\u8f91",onClick:this.showModal.bind(this,t,!1),style:{marginRight:"1em"},className:"can-click"}),h.default.createElement(r.default,{type:"delete",title:"\u5220\u9664",onClick:this.deleteContent.bind(this,t),className:"can-click"}))}],this.showModal=((e,t)=>{this.setState({modalVisible:!0,modalContent:e,modalDisabled:t})}),this.handleOk=(e=>{this.setState({modalVisible:!1})}),this.deleteContent=(e=>{o.default.confirm({title:"\u4f60\u60f3\u5220\u9664\u8fd9\u4e9b\u9879\u76ee\u5417\uff1f",okText:"\u786e\u5b9a",okType:"danger",cancelText:"\u53d6\u6d88",onOk:()=>{this.props.dispatch({type:"knowledge/deleteContent",payload:{id:e.id}})},onCancel(){console.log("Cancel")}})}),this.handleSubmit=(e=>{e&&e.preventDefault(),this.props.form.validateFields((e,t)=>{e||this.props.dispatch({type:"knowledge/getContentList",payload:{params:{pageSize:y,pageNum:this.props.knowledge.contentObj.pageNum},data:t}})})}),this.handleReset=(()=>{this.props.form.resetFields()}),this.handleTableChange=((e,t,a)=>{var l=this.props.knowledge.contentObj.queryData;this.props.dispatch({type:"knowledge/getContentList",payload:{params:{pageSize:y,pageNum:e.current},data:l}})})}componentDidMount(){this.props.dispatch({type:"knowledge/getAllClassificationList"}),this.props.knowledge.contentObj.list||this.handleSubmit()}render(){var e=this.props.knowledge,t=e.allClassificationList,a=e.contentObj,l=a.list,i=void 0===l?[]:l,o=a.total,r=a.pageNum,c=a.queryData,m=void 0===c?{}:c,p=this.state,g=p.modalVisible,y=p.modalDisabled,E=p.modalContent,w=this.props.form.getFieldDecorator;return h.default.createElement("div",null,h.default.createElement(f.default,{layout:"inline",onSubmit:this.handleSubmit,style:{marginBottom:"1rem"}},h.default.createElement(k,{label:"\u5206\u7c7b"},w("classificationId",{initialValue:m.classificationId,rules:[]})(h.default.createElement(u.default,{style:{width:180},placeholder:"\u8bf7\u9009\u62e9\u5206\u7c7b"},t.map(e=>h.default.createElement(v,{value:e.id,key:e.id},e.classificationName))))),h.default.createElement(k,{label:"\u6807\u9898"},w("title",{initialValue:m.title,rules:[]})(h.default.createElement(d.default,{placeholder:"\u8bf7\u8f93\u5165\u6807\u9898"}))),h.default.createElement(k,{label:"\u521b\u5efa\u4eba"},w("username",{initialValue:m.username,rules:[]})(h.default.createElement(d.default,{placeholder:"\u8bf7\u8f93\u5165\u521b\u5efa\u4eba"}))),h.default.createElement(k,null,h.default.createElement(s.default,{type:"primary",htmlType:"submit"},"\u641c\u7d22")),h.default.createElement(k,null,h.default.createElement(s.default,{onClick:this.handleReset},"\u91cd\u7f6e"))),h.default.createElement("div",{style:{marginBottom:"1rem"}},h.default.createElement(s.default,{onClick:this.showModal.bind(this,{},!1)},"\u65b0\u589e")),h.default.createElement(n.default,{columns:this.columns,dataSource:i,onChange:this.handleTableChange,loading:this.props.loading.effects["knowledge/getContentList"],rowKey:"id",pagination:{showQuickJumper:!0,current:r,total:o}}),h.default.createElement(b.default,{visible:g,formDisabled:y,onOk:this.handleOk,formData:E}))}},m=p))||m),w=f.default.create()(E);t.default=w},mNzB:function(e,t,a){"use strict";var l=a("g09b"),i=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var n=l(a("kLXV"));a("5NDa");var s=l(a("5rEg"));a("OaEy");var d=l(a("2fM7"));a("y8nQ");var o,r,u,c=l(a("Vl3Y")),m=i(a("q1tI")),p=a("MuoO"),f=c.default.Item,h=d.default.Option,g=s.default.TextArea,b=(o=(0,p.connect)(e=>{var t=e.knowledge;return{knowledge:t}}),o((u=class extends m.Component{constructor(){super(...arguments),this.handleSubmit=(e=>{this.props.formDisabled?this.props.onOk():this.props.form.validateFields((e,t)=>{if(!e){var a=this.props.formData,l=void 0===a?{}:a;void 0!==l.id&&(t.id=l.id),this.props.dispatch({type:"knowledge/saveContent",payload:t}).then(()=>{this.props.onOk(),this.props.form.resetFields()})}})})}render(){var e=this.props.form.getFieldDecorator,t=this.props.knowledge.allClassificationList,a=this.props,l=a.visible,i=a.formDisabled,o=a.formData,r=void 0===o?{}:o;return m.default.createElement(n.default,{title:"\u5185\u5bb9",visible:l,onOk:this.handleSubmit,onCancel:this.props.onOk},m.default.createElement(c.default,{onSubmit:this.handleSubmit},m.default.createElement(f,{label:"\u5206\u7c7b"},e("classificationId",{initialValue:r.classificationId?Number.parseFloat(r.classificationId):void 0,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5206\u7c7b"}]})(m.default.createElement(d.default,{placeholder:"\u8bf7\u8f93\u5165\u5206\u7c7b",disabled:i},t.map(e=>m.default.createElement(h,{value:e.id,key:e.id},e.classificationName))))),m.default.createElement(f,{label:"\u6807\u9898"},e("title",{initialValue:r.title,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6807\u9898"}]})(m.default.createElement(s.default,{placeholder:"\u8bf7\u8f93\u5165\u6807\u9898",disabled:i}))),m.default.createElement(f,{label:"\u5185\u5bb9"},e("content",{initialValue:r.content,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5185\u5bb9"}]})(m.default.createElement(g,{disabled:i,autosize:{minRows:3,maxRows:6},placeholder:"\u8bf7\u8f93\u5165\u5185\u5bb9"})))))}},r=u))||r),k=c.default.create()(b);t.default=k}}]);