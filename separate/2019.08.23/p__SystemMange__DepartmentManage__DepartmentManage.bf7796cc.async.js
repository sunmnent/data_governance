(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[59],{"4rNJ":function(e,t,a){"use strict";var d=a("g09b"),l=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var n=d(a("kLXV"));a("+L6B");var i=d(a("2/Rp")),o=d(a("jehZ")),s=d(a("2Taf")),r=d(a("vZ4D")),u=d(a("l4Ni")),c=d(a("ujKo")),f=d(a("MhPg"));a("5NDa");var p=d(a("5rEg"));a("y8nQ");var m,h,g,b=d(a("Vl3Y")),E=l(a("q1tI")),v=d(a("Jt6A"));a("6zIO");var D=b.default.Item,C=p.default.TextArea,y={same:"\u6dfb\u52a0\u540c\u7ea7",child:"\u6dfb\u52a0\u5b50\u7ea7",edit:"\u7f16\u8f91\u90e8\u95e8",add:"\u6dfb\u52a0\u90e8\u95e8"},N=(m=b.default.create(),m((g=function(e){function t(e){var a;return(0,s.default)(this,t),a=(0,u.default)(this,(0,c.default)(t).call(this,e)),a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,t){e||a.props.onSubmit&&a.props.onSubmit(t)})},a.handleClose=function(){a.props.onClose&&a.props.onClose()},a.state={},a}return(0,f.default)(t,e),(0,r.default)(t,[{key:"render",value:function(){var e=this.props,t=e.visible,a=e.popName,d=e.treeDisabled,l=e.dataList,s=e.editData,r=e.isAdd,u=e.addEditLoading,c=this.props.form.getFieldDecorator,f={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:18}}},m={wrapperCol:{xs:{span:24,offset:0},sm:{span:24,offset:0}}};return E.default.createElement(n.default,{wrapClassName:"vertical-center-modal",visible:t,title:y[a],okText:"\u4fdd\u5b58",onCancel:this.handleClose,destroyOnClose:!0,footer:null,maskClosable:!1},E.default.createElement(b.default,{onSubmit:this.handleSubmit},E.default.createElement(D,(0,o.default)({},f,{label:"\u4e0a\u7ea7\u90e8\u95e8\uff1a"}),c("parent_id",{rules:[{required:!0,message:"\u4e0a\u7ea7\u90e8\u95e8\u4e0d\u80fd\u4e3a\u7a7a"}],initialValue:"child"==a?s.nodeCode:s.parentNodeCode})(E.default.createElement(v.default,{showSearch:!0,defaultValueItem:"nodeCode",option:l,allDisabled:d}))),E.default.createElement(D,(0,o.default)({},f,{label:"\u90e8\u95e8\u540d\u79f0\uff1a"}),c("name",{rules:[{required:!0,message:"\u90e8\u95e8\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a"}],initialValue:r?null:s.nodeName})(E.default.createElement(p.default,{maxLength:500,placeholder:"\u8bf7\u8f93\u5165\u90e8\u95e8\u540d\u79f0"}))),E.default.createElement(D,(0,o.default)({},f,{label:"\u90e8\u95e8\u63cf\u8ff0\uff1a"}),c("notes",{initialValue:r?null:s.nodeDescrible})(E.default.createElement(C,{maxLength:1e3,style:{maxHeight:90,height:90}}))),E.default.createElement(D,(0,o.default)({className:"form-btn-list"},m),E.default.createElement(i.default,{type:"primary",htmlType:"submit",loading:u},"\u4fdd\u5b58"),E.default.createElement(i.default,{type:"ghost",onClick:this.handleClose},"\u53d6\u6d88"))))}}]),t}(E.Component),h=g))||h);t.default=N},exFK:function(e,t,a){"use strict";var d=a("tAuX"),l=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("g9YV");var n=l(a("wCAj"));a("T2oS");var i=l(a("W9HT"));a("+L6B");var o=l(a("2/Rp"));a("P2fV");var s=l(a("NJEC"));a("Pwec");var r=l(a("CtXQ"));a("miYZ");var u=l(a("tsqr")),c=l(a("2Taf")),f=l(a("vZ4D")),p=l(a("l4Ni")),m=l(a("ujKo")),h=l(a("rlhR")),g=l(a("MhPg")),b=d(a("q1tI")),E=l(a("4rNJ")),v=a("Nmln");a("f4Np");var D=function(e){function t(e){var a;return(0,c.default)(this,t),a=(0,p.default)(this,(0,m.default)(t).call(this,e)),a.fetchData=function(){(0,v.DeptCatagoryQueryDept)({}).then(function(e){var t=[];e&&e.success&&e.obj&&(t=e.obj),a.setState({pageLoading:!1,tableData:t})})},a.popAddEditModal=function(e,t,d,l){a.setState({isAdd:e,popName:t,isShowModal:!0,treeDisabled:d,editData:l})},a.popDelete=function(e){(0,v.DeptCatagoryDetele)({id:e.nodeCode}).then(function(e){e&&(e.success?(u.default.success("\u5220\u9664\u6210\u529f"),a.fetchData()):u.default.error(e.msg))})},a.onClose=function(){a.setState({isShowModal:!1})},a.onSubmit=function(e){if(a.setState({addEditLoading:!0}),a.state.isAdd){var t={name:e.name,note:e.notes},d=e.parent_id;(0,v.DeptCatagoryAdd)(t,d).then(function(e){e&&(e.success?a.setState({addEditLoading:!1,isShowModal:!1},function(){a.fetchData()}):(a.setState({addEditLoading:!1}),u.default.error(e.msg)))})}else{var l={name:e.name,note:e.notes,id:a.state.editData.nodeCode},n=e.parent_id;(0,v.DeptCatagoryUpdate)(l,n).then(function(e){e&&(e.success?a.setState({addEditLoading:!1,isShowModal:!1},function(){a.fetchData()}):(a.setState({addEditLoading:!1}),u.default.error(e.msg)))})}},a.state={tableData:[],popName:"",isShowModal:!1,treeDisabled:!0,editData:[],isAdd:!0,addEditLoading:!1,pageLoading:!0},a.columns=[{title:"\u5206\u7c7b\u540d\u79f0",dataIndex:"nodeName",key:"nodeName"},{title:"\u63cf\u8ff0",dataIndex:"nodeDescrible",key:"nodeDescrible",width:"12%"},{title:"\u64cd\u4f5c",dataIndex:"action",width:"20%",key:"action",render:function(e,t,d){return b.default.createElement("span",null,b.default.createElement("i",{className:"iconfont icon-tianjiatongji dmc_icon",title:"\u6dfb\u52a0\u540c\u7ea7",onClick:a.popAddEditModal.bind((0,h.default)(a),!0,"same",!0,t)}),b.default.createElement("i",{title:"\u6dfb\u52a0\u5b50\u7ea7",style:{marginLeft:"10px"},onClick:a.popAddEditModal.bind((0,h.default)(a),!0,"child",!0,t),className:"iconfont dmc_icon icon-tianjiaziji"}),b.default.createElement(r.default,{type:"form",title:"\u7f16\u8f91",style:{marginLeft:"10px"},onClick:a.popAddEditModal.bind((0,h.default)(a),!1,"edit",!1,t),className:"dmc_icon"}),t.children&&t.children.length>0?b.default.createElement("span",{style:{color:"#ddd",marginLeft:"10px",cursor:"pointer"}},b.default.createElement(r.default,{type:"delete"})):b.default.createElement(s.default,{title:"\u4f60\u662f\u5426\u8981\u5220\u9664\u6b64\u90e8\u95e8?",onConfirm:a.popDelete.bind((0,h.default)(a),t),okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88"},b.default.createElement(r.default,{type:"delete",title:"\u5220\u9664",style:{marginLeft:"10px"},className:"dmc_icon_red"})))}}],a}return(0,g.default)(t,e),(0,f.default)(t,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"render",value:function(){var e=this.state,t=e.tableData,a=e.isShowModal,d=e.popName,l=e.treeDisabled,s=e.editData,r=e.addEditLoading,u=e.isAdd,c=e.pageLoading;return b.default.createElement("div",{className:"department_manage_content"},b.default.createElement(o.default,{onClick:this.popAddEditModal.bind(this,!0,"add",!1),type:"primary",className:"dmc_btn"},"\u65b0\u589e"),c?b.default.createElement(i.default,{style:{display:"block",padding:"200px 0"}}):b.default.createElement(n.default,{columns:this.columns,dataSource:t&&t[0].children?t[0].children:[],rowKey:"nodeCode",defaultExpandAllRows:!0,pagination:!1}),b.default.createElement(E.default,{visible:a,popName:d,onClose:this.onClose,treeDisabled:l,dataList:t,editData:s,onSubmit:this.onSubmit,addEditLoading:r,isAdd:u}))}}]),t}(b.Component);t.default=D},f4Np:function(e,t,a){}}]);