(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[63],{DnCW:function(e,t,a){"use strict";var n=a("g09b"),l=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var d=l(a("q1tI"));a("2qtc");var i=n(a("kLXV")),u=n(a("2Taf")),s=n(a("vZ4D")),c=n(a("l4Ni")),o=n(a("ujKo")),r=n(a("MhPg")),f=n(a("meRS")),m=n(a("IAP5")),h=a("Nmln"),p="",v=function(e){function t(e){var a;return(0,u.default)(this,t),a=(0,c.default)(this,(0,o.default)(t).call(this,e)),a.handleOK=function(){(0,h.SaveUserRole)({accountId:a.state.accountId,ids:p}).then(function(e){return a.props.handleCancel&&a.props.handleCancel(),e}).then(function(e){a.updataUserRoleDataAction(e)})},a.updataUserRoleDataAction=function(e){e.success?i.default.success({title:"\u63d0\u793a\u4fe1\u606f",okText:"\u786e\u5b9a",content:"\u4fdd\u5b58\u8d26\u6237\u3010".concat(a.state.userName,"\u3011\u7684\u89d2\u8272\u6210\u529f!")}):i.default.error({title:"\u63d0\u793a\u4fe1\u606f",okText:"\u786e\u5b9a",content:d.default.createElement("div",null,d.default.createElement("p",null,"\u4fdd\u5b58\u8d26\u6237\u3010",a.state.userName,"\u3011\u7684\u89d2\u8272\u5931\u8d25!"))})},a.handleClose=function(){a.props.handleCancel&&a.props.handleCancel()},a.getCheckedNodes=function(e){p=f.default.notNull(e)?f.default.jointIds(e):""},a.state={accountId:[],userName:""},a}return(0,r.default)(t,e),(0,s.default)(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({accountId:e.id,userName:e.roleName})}},{key:"render",value:function(){var e=this.props,t=e.visible,a=e.roleData,n=[{title:"\u89d2\u8272\u540d\u79f0",dataKey:"name",width:"40%"},{title:"\u63cf\u8ff0",dataKey:"remark",width:"60%"}],l={levels:2,check:!0,columns:n,nodes:f.default.notNull(a)?f.default.arrayDataToTree(a):null,selectTreeId:"",getCheckedNodes:this.getCheckedNodes,scroll:{y:$(window).height()-200},type:"radio"};return d.default.createElement(i.default,{title:"\u7528\u6237\u89d2\u8272",visible:t,okText:"\u4fdd\u5b58",width:"55%",style:{top:20},onCancel:this.handleClose,destroyOnClose:!0,onOk:this.handleOK},d.default.createElement("div",{style:{minHeight:$(window).height()-200}},f.default.notNull(a)?d.default.createElement(m.default,l):null))}}]),t}(d.Component);t.default=v},PZtv:function(e,t,a){"use strict";var n=a("g09b"),l=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var d=n(a("kLXV"));a("+L6B");var i=n(a("2/Rp")),u=n(a("jehZ"));a("5NDa");var s=n(a("5rEg")),c=n(a("2Taf")),o=n(a("vZ4D")),r=n(a("l4Ni")),f=n(a("ujKo")),m=n(a("MhPg"));a("OaEy");var h=n(a("2fM7"));a("y8nQ");var p=n(a("Vl3Y"));a("7Kak");var v,E,b,y=n(a("9yH6")),g=l(a("q1tI"));a("6zIO");var C=y.default.Group,N=p.default.Item,k=h.default.Option,S=(v=p.default.create(),v((b=function(e){function t(){var e,a;(0,c.default)(this,t);for(var n=arguments.length,l=new Array(n),d=0;d<n;d++)l[d]=arguments[d];return a=(0,r.default)(this,(e=(0,f.default)(t)).call.apply(e,[this].concat(l))),a.state={visible:!1,isAdd:!0,addLoading:!1,editValue:a.props.editValue},a.handleClose=function(){a.props.handleCancel&&a.props.handleCancel()},a.handleEditData=function(e,t,a){return"username"==t?a?null:e.username:"nameCn"==t?a?null:e.nameCn:"sex"==t?a?1:e.sex:"phone"==t?a?null:e.phone:"accountCode"==t?a?null:e.accountCode:"cellPhone"==t?a?null:e.cellPhone:a?1:e.active},a.handleSubmit=function(e,t){e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,t){e||a.props.addSubmit(t)})},a}return(0,m.default)(t,e),(0,o.default)(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({visible:e.addEditVisible,addLoading:e.addLoading,isAdd:e.isAdd,key:e.key,editValue:e.editValue})}},{key:"render",value:function(){var e={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:18}}},t={wrapperCol:{xs:{span:24,offset:0},sm:{span:24,offset:0}}},a=this.props.form.getFieldDecorator,n=this.props.isAdd,l=this.state,c=l.editValue,o=l.addLoading;return g.default.createElement("div",null,g.default.createElement(d.default,{title:this.state.isAdd?"\u65b0\u589e\u7528\u6237":"\u7f16\u8f91\u7528\u6237",visible:this.state.visible,footer:null,onCancel:this.handleClose,destroyOnClose:!0,maskClosable:!1},g.default.createElement(p.default,{onSubmit:this.handleSubmit},g.default.createElement(N,(0,u.default)({},e,{label:"\u7528\u6237\u540d",colon:!0}),a("username",{rules:[{required:!0,message:"\u7528\u6237\u540d\u4e0d\u80fd\u4e3a\u7a7a"}],initialValue:this.handleEditData(c,"username",n)})(g.default.createElement(s.default,{placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"}))),g.default.createElement(N,(0,u.default)({},e,{label:"\u59d3\u540d",colon:!0}),a("nameCn",{rules:[{required:!0,message:"\u59d3\u540d\u4e0d\u80fd\u4e3a\u7a7a"}],initialValue:this.handleEditData(c,"nameCn",n)})(g.default.createElement(s.default,{placeholder:"\u8bf7\u8f93\u5165\u59d3\u540d"}))),g.default.createElement(N,(0,u.default)({},e,{label:"\u6027\u522b",colon:!0}),a("sex",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6027\u522b"}],initialValue:this.handleEditData(c,"sex",n)})(g.default.createElement(C,null,g.default.createElement(y.default,{value:1},"\u7537"),g.default.createElement(y.default,{value:2},"\u5973")))),g.default.createElement(N,(0,u.default)({},e,{label:"\u5b66\u53f7/\u6559\u5de5\u53f7",colon:!0}),a("accountCode",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5b66\u53f7/\u6559\u5de5\u53f7"}],initialValue:this.handleEditData(c,"accountCode",n)})(g.default.createElement(s.default,{placeholder:"\u8bf7\u8f93\u5165\u5b66\u53f7/\u6559\u5de5\u53f7"}))),g.default.createElement(N,(0,u.default)({},e,{label:"\u624b\u673a\u53f7",colon:!0}),a("phone",{rules:[{required:!1},{pattern:"^((13[0-9])|(14[5|7])|(15([0-3]|[5-9]))|(18[0,5-9]))\\d{8}$",message:"\u624b\u673a\u683c\u5f0f\u4e0d\u6b63\u786e"}],initialValue:this.handleEditData(c,"phone",n)})(g.default.createElement(s.default,{placeholder:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7\u7801"}))),g.default.createElement(N,(0,u.default)({},e,{label:"\u90ae\u7bb1",colon:!0}),a("cellPhone",{rules:[{type:"email",message:"\u90ae\u7bb1\u683c\u5f0f\u4e0d\u6b63\u786e"}],initialValue:this.handleEditData(c,"cellPhone",n)})(g.default.createElement(s.default,{placeholder:"\u8bf7\u8f93\u5165\u90ae\u7bb1"}))),g.default.createElement(N,(0,u.default)({},e,{label:"\u6fc0\u6d3b\u72b6\u6001",colon:!0}),a("active",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6fc0\u6d3b\u72b6\u6001"}],initialValue:this.handleEditData(c,"active",n)})(g.default.createElement(h.default,null,g.default.createElement(k,{value:1},"\u5df2\u6fc0\u6d3b"),g.default.createElement(k,{value:2},"\u672a\u6fc0\u6d3b")))),g.default.createElement(N,(0,u.default)({className:"form-btn-list"},t),g.default.createElement(i.default,{type:"primary",htmlType:"submit",loading:o},"\u4fdd\u5b58"),g.default.createElement(i.default,{type:"ghost",onClick:this.handleClose},"\u53d6\u6d88")))))}}]),t}(g.Component),E=b))||E);t.default=S},pj3F:function(e,t,a){"use strict";var n=a("g09b"),l=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var d=l(a("q1tI"));a("+L6B");var i=n(a("2/Rp"));a("Pwec");var u=n(a("CtXQ"));a("miYZ");var s=n(a("tsqr")),c=n(a("p0pE")),o=n(a("2Taf")),r=n(a("vZ4D")),f=n(a("l4Ni")),m=n(a("ujKo")),h=n(a("rlhR")),p=n(a("MhPg"));a("2qtc");var v=n(a("kLXV"));a("g9YV");var E=n(a("wCAj")),b=n(a("PZtv")),y=n(a("DnCW")),g=n(a("zUcB")),C=a("Nmln");a("3MCO"),a("xR6b"),a("KFsi");var N=E.default.Column,k=(E.default.ColumnGroup,v.default.confirm),S=function(e){function t(e){var a;return(0,o.default)(this,t),a=(0,f.default)(this,(0,m.default)(t).call(this,e)),a.columnData=function(e){var t=e.map(function(e){return{key:e.id,username:e.username,nameCn:e.nameCn,sex:1==e.sex?"\u7537":"\u5973",active:1==e.active?"\u5df2\u6fc0\u6d3b":"\u672a\u6fc0\u6d3b"}});a.setState({tableData:t})},a.fetchData=function(){(0,C.UserList)({}).then(function(e){a.columnData(e.rows),a.setState({pageSize:e.totalRows})}).catch(function(e){console.log("\u9519\u8bef\uff1a"+e)})},a.changeAddVisible=function(){a.setState({addEditVisible:!0,isAdd:!0})},a.changeEditVisible=function(e){(0,C.UserList)({Q_username_like:e.username}).then(function(t){var n=[];t.rows.forEach(function(t){t.id==e.key&&(n=t)}),a.setState({editValue:n})}).then(function(){a.setState({addEditVisible:!0,isAdd:!1,rowId:e.key})})},a.changeUserRole=function(e,t){(0,C.GetUserRole)({accountId:e}).then(function(e){console.log(e.obj),a.setState({roleData:e.obj})}).then(function(){a.setState({roleVisble:!0,roleId:e,roleName:t.username})})},a.changeFunction=function(e,t){(0,C.CheckUserPermissions)({accountId:e}).then(function(e){a.setState({functionData:e.obj})}).then(function(){a.setState({functionVisble:!0,functionId:e,functionName:t.username})})},a.handleCancel=function(e){a.setState({addEditVisible:!1,roleVisble:!1,functionVisble:!1})},a.deleteUser=function(e,t){var n=(0,h.default)(a);k({title:"\u7528\u6237\u5220\u9664",content:"\u4f60\u662f\u5426\u786e\u5b9a\u5220\u9664\u3010".concat(t,"\u3011\u7528\u6237\uff1f"),cancelText:"\u53d6\u6d88",okText:"\u786e\u5b9a",onOk:function(){(0,C.DeleteUser)({ids:e,type:2}).then(function(e){n.isSuccess(e)}).then(function(){n.fetchData()})}})},a.initPassword=function(e,t){var n=(0,h.default)(a);k({title:"\u521d\u59cb\u5316\u5bc6\u7801",content:"\u4f60\u662f\u5426\u786e\u5b9a\u521d\u59cb\u5316\u3010".concat(t,"\u3011\u7684\u5bc6\u7801\u5417\uff1f"),cancelText:"\u53d6\u6d88",okText:"\u786e\u5b9a",onOk:function(){(0,C.InitPassword)({ids:e,flag:!0}).then(function(e){n.userSeccess("\u521d\u59cb\u5316\u5bc6\u7801\u6210\u529f\uff0c\u60a8\u7684\u5bc6\u7801\u662f:abcd1234")})}})},a.userSeccess=function(e){v.default.success({content:e,okText:"\u77e5\u9053\u4e86"})},a.addSubmit=function(e){a.setState({addLoading:!0,editLoading:!0});var t=a.state,n=t.isAdd,l=t.rowId;n?(0,C.AddUser)((0,c.default)({},e,{delStatus:2})).then(function(t){t&&t.success?(a.setState({addLoading:!1}),a.isSuccess(t,e),(0,C.InitPassword)({ids:t.obj.id,flag:!0}).then(function(e){a.userSeccess("\u65b0\u5efa\u7528\u6237\u6210\u529f\uff0c\u60a8\u7684\u5bc6\u7801\u662f:abcd1234")})):s.default.error(t.msg)}).then(function(){a.fetchData()}):(0,C.AddUser)((0,c.default)({id:l},e,{delStatus:2})).then(function(t){a.setState({addLoading:!1}),a.isSuccess(t,e)}).then(function(){a.fetchData()})},a.isSuccess=function(e,t){if(e.success)a.setState({addEditVisible:!1,addLoading:!1});else if(t.username.length>255)s.default.error("\u7528\u6237\u540d\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7255\u4f4d");else if(t.nameCn.length>255)s.default.error("\u59d3\u540d\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7255\u4f4d");else{var n=e.msg;s.default.error(n||"\u64cd\u4f5c\u5931\u8d25")}},a.componentDidMount=function(){var e=a.state,t=e.page,n=e.pageSize;a._isMounted=!0,a.fetchData(),(0,C.UserList)({page:t,pageSize:n})},a.componentWillUnMount=function(){a._isMounted=!1},a.renderTypeTable=function(){return d.default.createElement(E.default,{dataSource:a.state.tableData,className:"table-sty sunm-table"},d.default.createElement(N,{title:"\u7528\u6237\u540d",dataIndex:"username",key:"username",width:"20%",render:function(e,t){return d.default.createElement("a",{title:t.username,className:"functionHover"},t.username)}}),d.default.createElement(N,{title:"\u59d3\u540d",dataIndex:"nameCn",key:"nameCn",width:"20%",render:function(e,t){return d.default.createElement("a",{title:t.nameCn,className:"functionHover"},t.nameCn)}}),d.default.createElement(N,{title:"\u6027\u522b",dataIndex:"sex",key:"sex",width:"10%"}),d.default.createElement(N,{title:"\u6fc0\u6d3b\u72b6\u6001",dataIndex:"active",key:"active",width:"10%"}),d.default.createElement(N,{className:"sunm-text-center",title:"\u64cd\u4f5c",key:"action",width:"40%",render:function(e,t){return d.default.createElement("span",null,d.default.createElement("a",{title:"\u7f16\u8f91\u7528\u6237",onClick:a.changeEditVisible.bind((0,h.default)(a),t)},d.default.createElement(u.default,{type:"form",className:"sys-icon sys-padd"})),d.default.createElement("a",{title:"\u521d\u59cb\u5316\u5bc6\u7801",onClick:a.initPassword.bind((0,h.default)(a),t.key,t.username)},d.default.createElement(u.default,{type:"sync",className:"sys-icon sys-padd"})),d.default.createElement("a",{title:"\u7528\u6237\u89d2\u8272",onClick:a.changeUserRole.bind((0,h.default)(a),t.key,t)},d.default.createElement(u.default,{type:"user-add",className:"sys-icon sys-padd"})),d.default.createElement("a",{title:"\u529f\u80fd\u6743\u9650"},d.default.createElement(u.default,{type:"setting",className:"sys-icon sys-padd",onClick:a.changeFunction.bind((0,h.default)(a),t.key,t)})),d.default.createElement("a",{title:"\u5220\u9664\u7528\u6237",onClick:a.deleteUser.bind((0,h.default)(a),t.key,t.username)},d.default.createElement(u.default,{type:"delete",className:"sys-icon sys-padd"})))}}))},a.state={tableData:[],page:1,pageSize:"",addEditVisible:!1,isAdd:!0,rowId:"",rowIds:[],addLoading:!1,editValue:[],roleVisble:!1,roleData:[],functionVisble:!1,functionData:[],roleId:[],roleName:"",functionId:[],functionName:""},a}return(0,p.default)(t,e),(0,r.default)(t,[{key:"render",value:function(){var e=this.state,t=e.addEditVisible,a=e.isAdd,n=e.addLoading,l=e.editValue,s=e.roleVisble,c=e.roleData,o=e.functionData,r=e.functionVisble,f=e.roleId,m=e.roleName,h=e.functionId,p=e.functionName;return d.default.createElement("div",{className:"sunm-content sunm-standard-content"},d.default.createElement("div",{className:"sunm-inner-content top"},d.default.createElement("div",{className:"sunm-inner-column"},d.default.createElement("div",{className:"sunm-inner-column-cont"},d.default.createElement(i.default,{onClick:this.changeAddVisible.bind(this,!0)},d.default.createElement(u.default,{type:"plus",className:"sys-icon"}),"\u65b0\u589e\u7528\u6237"),d.default.createElement("div",{className:"table-comment"},this.renderTypeTable(),d.default.createElement("span",null,this.state.pageSize,"\u6761\u6570\u636e")),d.default.createElement(b.default,{isAdd:a,addEditVisible:t,addSubmit:this.addSubmit.bind(this),addLoading:n,handleCancel:this.handleCancel.bind(this),editValue:l}),d.default.createElement(y.default,{visible:s,handleCancel:this.handleCancel.bind(this),roleData:c,id:f,roleName:m}),d.default.createElement(g.default,{visible:r,handleCancel:this.handleCancel.bind(this),functionData:o,id:h,functionName:p})))))}}]),t}(d.Component);t.default=S},zUcB:function(e,t,a){"use strict";var n=a("g09b"),l=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var d=l(a("q1tI"));a("2qtc");var i=n(a("kLXV")),u=n(a("2Taf")),s=n(a("vZ4D")),c=n(a("l4Ni")),o=n(a("ujKo")),r=n(a("MhPg")),f=n(a("meRS")),m=n(a("IAP5")),h=a("Nmln"),p=[],v=function(e){function t(e){var a;return(0,u.default)(this,t),a=(0,c.default)(this,(0,o.default)(t).call(this,e)),a.handleOK=function(){var e=0,t="";e=p.indexOf("5000"),-1!==e&&(t=p.slice(e+5)),console.log("\u4f4d\u7f6e\uff1a"+e+",\u7ed3\u679c\uff1a"+t),(0,h.SaveUserFunction)({accountId:a.state.accountId,rightIds:t||p}).then(function(e){return a.props.handleCancel&&a.props.handleCancel(),e}).then(function(e){a.updataUserRoleDataAction(e)})},a.updataUserRoleDataAction=function(e){e.success?i.default.success({title:"\u63d0\u793a\u4fe1\u606f",okText:"\u786e\u5b9a",content:"\u4fdd\u5b58\u8d26\u6237\u3010".concat(a.state.userName,"\u3011\u7684\u529f\u80fd\u6743\u9650\u6210\u529f!")}):i.default.error({title:"\u63d0\u793a\u4fe1\u606f",okText:"\u786e\u5b9a",content:d.default.createElement("div",null,d.default.createElement("p",null,"\u4fdd\u5b58\u8d26\u6237\u3010",a.state.userName,"\u3011\u7684\u529f\u80fd\u6743\u9650\u5931\u8d25!"))})},a.handleClose=function(){a.props.handleCancel&&a.props.handleCancel()},a.getCheckedNodes=function(e){p=f.default.notNull(e)?f.default.jointIds(e):""},a.state={accountId:[],userName:""},a}return(0,r.default)(t,e),(0,s.default)(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({accountId:e.id,userName:e.functionName})}},{key:"render",value:function(){var e=this.props,t=e.visible,a=e.functionData,n=[{title:"\u6743\u9650\u6a21\u5757",dataKey:"name",width:"60%"},{title:"\u6743\u9650\u7c7b\u578b",dataKey:"type",width:"20%",render:function(e,t){return d.default.createElement("div",{className:"divTdRight",style:{width:"20%"}},1==t.type?"\u83dc\u5355":2==t.type?"\u529f\u80fd\u6309\u94ae":9==t.type?"\u5176\u4ed6":"")}},{title:"\u6743\u9650\u72b6\u6001",dataKey:"status",width:"20%",render:function(e,t){return d.default.createElement("div",{className:"divTdRight",style:{width:"20%"}},1==t.status?"\u542f\u7528":2==t.status?"\u672a\u542f\u7528":"")}}],l={levels:2,check:!0,columns:n,nodes:f.default.notNull(a)?f.default.arrayDataToTree(a):null,selectTreeId:"",getCheckedNodes:this.getCheckedNodes,scroll:{y:$(window).height()-200},isNeedNodes:!0};return d.default.createElement(i.default,{title:"\u529f\u80fd\u6743\u9650",visible:t,okText:"\u4fdd\u5b58",width:"55%",style:{top:20},onCancel:this.handleClose,destroyOnClose:!0,onOk:this.handleOK},d.default.createElement("div",{style:{minHeight:$(window).height()-200}},f.default.notNull(a)?d.default.createElement(m.default,l):null))}}]),t}(d.Component);t.default=v}}]);