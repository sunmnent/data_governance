(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[61],{"4rUd":function(e,t,a){"use strict";var l=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a("2Taf")),o=l(a("vZ4D")),r=l(a("l4Ni")),i=l(a("ujKo")),s=l(a("MhPg")),d=l(a("q1tI")),u=l(a("meRS"));a("KFsi");var c=l(a("IAP5")),f=function(e){function t(e){var a;return(0,n.default)(this,t),a=(0,r.default)(this,(0,i.default)(t).call(this,e)),a.getCheckedNodes=function(e){a.props.changeSelect(e)},a.state={allRightData:a.props.data},a}return(0,s.default)(t,e),(0,o.default)(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({allRightData:e.data})}},{key:"render",value:function(){var e=[{title:"\u6743\u9650\u6a21\u5757",dataKey:"name",width:"30%"},{title:"\u6743\u9650\u7c7b\u578b",dataKey:"type",width:"10%"},{title:"\u6743\u9650\u72b6\u6001",dataKey:"status",width:"10%"},{title:"\u6743\u9650\u94fe\u63a5",dataKey:"url",width:"30%"},{title:"\u63cf\u8ff0",dataKey:"remark",width:"20%"}],t=this.state.allRightData,a=u.default.arrayDataToTree(t),l={levels:2,check:!0,columns:e,nodes:a,getCheckedNodes:this.getCheckedNodes,selectTreeId:"",scroll:"",isExpandAll:!0};return console.log(a),d.default.createElement("div",{className:"function-table"},u.default.notNull(a)?d.default.createElement(c.default,l):null)}}]),t}(d.default.Component);t.default=f},FTak:function(e,t,a){"use strict";var l=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("T2oS");var n=l(a("W9HT"));a("+L6B");var o=l(a("2/Rp"));a("2qtc");var r=l(a("kLXV")),i=l(a("2Taf")),s=l(a("vZ4D")),d=l(a("l4Ni")),u=l(a("ujKo")),c=l(a("MhPg"));a("Znn+");var f=l(a("ZTPi")),m=l(a("q1tI")),h=l(a("meRS")),p=a("Nmln"),v=l(a("f66p")),R=l(a("4rUd"));a("KFsi"),a("3MCO");f.default.TabPane;var g="",D=[],k=function(e){function t(e){var a;return(0,i.default)(this,t),a=(0,d.default)(this,(0,u.default)(t).call(this,e)),a.componentDidMount=function(){a._isMounted=!0,a.getRoleData()},a.componentWillUnMount=function(){a._isMounted=!1,a.getRoleData(),a.getAllRightData()},a.getRoleData=function(){(0,p.InitRole)({}).then(function(e){g=e.rows[0],a.setState({allRoleData:e.rows,roleId:g["id"]}),console.log("\u663e\u793a\u89d2\u8272\u6570\u636e\uff1a"+g["id"])}).then(function(){a.getAllRightData()})},a.columnData=function(e){e.forEach(function(e){e["key"]=e.id,e["label"]=e.name,e["value"]=e.id,e["status"]=1==e["status"]?"\u542f\u7528":"\u672a\u542f\u7528",1==e["type"]?e["type"]="\u83dc\u5355":2==e["type"]?e["type"]="\u529f\u80fd\u6309\u94ae":e["type"]="\u5176\u5b83"}),a.setState({allRightData:h.default.isNull(e)?[]:e,loading:!1})},a.getAllRightData=function(){(0,p.GetRoleFunction)({roleId:g["id"]}).then(function(e){a.columnData(e.obj)})},a.changeSelectRole=function(e){a.setState({loading:!0},function(){var t=this;g=e,(0,p.ClickRole)({roleId:g.id}).then(function(e){t.columnData(e.obj)})})},a.changeSelectRoleRight=function(e){D=h.default.notNull(e)?h.default.jointIdsAndParent(e,!1):""},a.saveRoleRight=function(){var e={roleId:g.id};e.rids=D,(0,p.SaveRole)({roleId:g.id,rids:D}).then(function(e){a.saveRoleRightResult(e)})},a.saveRoleRightResult=function(e){var t="",a="";t=e,a="\u89d2\u8272\u529f\u80fd\u6743\u9650",t.success?r.default.success({title:"\u63d0\u793a\u4fe1\u606f",okText:"\u786e\u5b9a",content:"\u4fdd\u5b58\u3010".concat(g.name,"\u3011\u7684").concat(a,"\u6210\u529f!")}):r.default.error({title:"\u63d0\u793a\u4fe1\u606f",okText:"\u786e\u5b9a",content:"\u4fdd\u5b58\u8d26\u6237\u3010".concat(g.name,"\u3011\u7684").concat(a,"\u5931\u8d25!")})},a.state={allRoleData:[],allRightData:[],loading:!0,roleId:""},a}return(0,c.default)(t,e),(0,s.default)(t,[{key:"render",value:function(){return m.default.createElement("div",{className:"sunm-content sunm-standard-content"},m.default.createElement("div",{className:"sunm-inner-content top"},m.default.createElement("div",{className:"sunm-inner-column"},m.default.createElement("div",{className:"sunm-inner-column-cont"},m.default.createElement("div",{className:"jsgl_content"},m.default.createElement("div",{className:"left_role_nav",style:{minHeight:$(window).height()-50}},m.default.createElement(v.default,{data:this.state.allRoleData,changeSelectRole:this.changeSelectRole,freshRoleData:this.getRoleData})),m.default.createElement("div",{className:"right_right_nav"},m.default.createElement(n.default,{spinning:this.state.loading},m.default.createElement("div",{className:"function-title"},"\u529f\u80fd\u6743\u9650"),m.default.createElement("div",{className:"rignt-function"},m.default.createElement(R.default,{data:this.state.allRightData,changeSelect:this.changeSelectRoleRight})),m.default.createElement(o.default,{type:"primary",className:"save_roleRight_btn",onClick:this.saveRoleRight},"\u4fdd\u5b58"))))))))}}]),t}(m.default.Component);t.default=k},f66p:function(e,t,a){"use strict";var l=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("+L6B");var n=l(a("2/Rp"));a("Pwec");var o=l(a("CtXQ")),r=l(a("2Taf")),i=l(a("vZ4D")),s=l(a("l4Ni")),d=l(a("ujKo")),u=l(a("rlhR")),c=l(a("MhPg"));a("2qtc");var f=l(a("kLXV")),m=l(a("q1tI")),h=a("Nmln"),p=l(a("meRS")),v=l(a("IAP5")),R=l(a("zmi2"));a("KFsi");var g=f.default.confirm,D="",k=function(e){function t(e){var a;return(0,r.default)(this,t),a=(0,s.default)(this,(0,d.default)(t).call(this,e)),a.addRoleAction=function(){for(var e=a.state.allRoleData?a.state.allRoleData:[],t=[],l=0;l<e.length;l++){var n=e[l];2!=n["type"]&&(n["label"]=e[l]["name"],n["key"]=e[l]["id"],n["value"]=e[l]["pathUrl"].substr(1,n["pathUrl"].length-2),t.push(n))}t=p.default.isNull(t)?[]:p.default.arrayDataToTree(t),a.setState({roleMoudleParmas:{title:"\u65b0\u589e\u89d2\u8272\u4fe1\u606f",visible:!0,roleInfo:{id:"",parentId:p.default.notNull(t)?t[0]["id"]:"",pathUrl:"",remark:"",name:""}},treeRoleData:t})},a.editRoleAction=function(){for(var e=D,t=a.state.allRoleData?a.state.allRoleData:[],l=[],n=0;n<t.length;n++){var o=t[n];2!=o["type"]&&-1==o["pathUrl"].indexOf(e.pathUrl)&&(o["label"]=t[n]["name"],o["key"]=t[n]["id"],o["value"]=t[n]["pathUrl"].substr(1,o["pathUrl"].length-2),l.push(o))}l=p.default.isNull(l)?[]:p.default.arrayDataToTree(l),p.default.isNull(e)?f.default.warning({title:"\u63d0\u793a\u4fe1\u606f",content:"\u8bf7\u9009\u62e9\u89d2\u8272\u4fe1\u606f!"}):"-1"==e.parentId?f.default.warning({title:"\u63d0\u793a\u4fe1\u606f",content:"\u6839\u89d2\u8272\u4e0d\u80fd\u8fdb\u884c\u4fee\u6539\u64cd\u4f5c!"}):a.setState({roleMoudleParmas:{title:"\u7f16\u8f91\u89d2\u8272\u4fe1\u606f",visible:!0,roleInfo:{id:e.id,parentId:e.parentId,pathUrl:e.pathUrl,remark:e.remark,seq:e.seq,name:e.name}},treeRoleData:l})},a.deleteRoleAction=function(e){var t=(0,u.default)(a),l=D;if(p.default.isNull(l))f.default.warning({title:"\u63d0\u793a\u4fe1\u606f",content:"\u8bf7\u9009\u62e9\u89d2\u8272\u4fe1\u606f!"});else if("-1"==l.parentId)f.default.warning({title:"\u63d0\u793a\u4fe1\u606f",content:"\u6839\u89d2\u8272\u4e0d\u80fd\u8fdb\u884c\u5220\u9664\u64cd\u4f5c!"});else{var n=l.id,o="";if(l["children"]){o="\u53ca\u5176\u5b69\u5b50\u8282\u70b9";var r=[{id:l.id}];p.default.getChildrenIds(l,r),n=p.default.jointIds(r)}g({title:"\u63d0\u793a\u4fe1\u606f",content:"\u786e\u5b9a\u8981\u5220\u9664\u3010".concat(l.name,"\u3011").concat(o,"\u6743\u9650\u4fe1\u606f\u5417?"),okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",onOk:function(){(0,h.DeleteRole)({ids:n}).then(function(e){t.getDeleteResult(e),t.props.freshRoleData&&t.props.freshRoleData()})},onCancel:function(){}})}},a.getDeleteResult=function(e){e.success?f.default.success({title:"\u63d0\u793a\u4fe1\u606f",content:"\u5220\u9664\u89d2\u8272\u6210\u529f!"}):f.default.error({title:"\u63d0\u793a\u4fe1\u606f",content:"\u5220\u9664\u89d2\u8272\u5931\u8d25!"})},a.changeRoleModuleState=function(e){a.setState({roleMoudleParmas:e})},a.clickParentHandle=function(e,t,l){D=l,a.props.changeSelectRole(D)},a.state={allRoleData:[],treeRoleData:[],roleMoudleParmas:{visible:!1,title:"",roleInfo:{}}},a}return(0,c.default)(t,e),(0,i.default)(t,[{key:"componentWillMount",value:function(){p.default.notNull(this.props.data)&&(D=this.props.data[0]),this.setState({allRoleData:this.props.data})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.data!=this.state.allRoleData&&(p.default.notNull(e.data)&&(D=e.data[0]),e.data!=this.state.allRoleData&&this.setState({allRoleData:e.data}))}},{key:"render",value:function(){var e=this,t=p.default.arrayDataToTree(this.state.allRoleData),a=this.props.freshRoleData,l=[{title:"\u89d2\u8272\u540d\u79f0",dataKey:"name",width:"60%",render:function(e,t){return m.default.createElement("div",{className:"divTdRight",style:{width:"60%"}},m.default.createElement("a",{title:t.name},t.name))}},{title:"\u64cd\u4f5c",dataKey:"action",width:"40%",render:function(t,a){return m.default.createElement("div",{className:"divTdRight",style:{width:"40%"}},m.default.createElement("a",{onClick:e.editRoleAction},m.default.createElement(o.default,{type:"form",className:"sys-icon tree-padd"})),m.default.createElement("a",{onClick:e.deleteRoleAction}," ",m.default.createElement(o.default,{type:"delete",className:"sys-icon tree-padd"})))}}],r={check:!1,levels:2,columns:l,nodes:t,getCheckedNodes:"",selectTreeId:"",scroll:"",events:this.clickParentHandle,isExpandAll:!0,isRoleName:!0};return m.default.createElement("div",null,m.default.createElement(n.default,{onClick:this.addRoleAction},m.default.createElement(o.default,{type:"plus",className:"sys-icon"}),"\u65b0\u589e"),m.default.createElement("div",{className:"left_user_nav"},p.default.notNull(t)?m.default.createElement(v.default,r):null,m.default.createElement(R.default,{freshRoleData:a,changeRoleModuleState:this.changeRoleModuleState,defaultData:this.state.roleMoudleParmas,treeRoleData:this.state.treeRoleData})))}}]),t}(m.default.Component);t.default=k},zmi2:function(e,t,a){"use strict";var l=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(a("2Taf")),o=l(a("vZ4D")),r=l(a("l4Ni")),i=l(a("ujKo")),s=l(a("MhPg"));a("2qtc");var d=l(a("kLXV"));a("giR+");var u=l(a("fyUT"));a("nRaC");var c=l(a("5RzL")),f=l(a("jehZ"));a("5NDa");var m=l(a("5rEg"));a("y8nQ");var h=l(a("Vl3Y")),p=l(a("q1tI")),v=l(a("meRS")),R=a("Nmln"),g=h.default.Item,D=h.default.create()(function(e){var t=e.params,a=e.handleOk,l=e.handleCancel,n=e.form,o=n.getFieldDecorator,r={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:14}}};return p.default.createElement(d.default,{title:t.title,visible:t.visible,maskClosable:!1,okText:"\u4fdd\u5b58",style:{top:20},onOk:a,onCancel:l},p.default.createElement(h.default,null,p.default.createElement(g,(0,f.default)({},r,{label:"\u89d2\u8272\u540d\u79f0"}),o("name",{initialValue:v.default.notNull(t.roleInfo.name)?"".concat(t.roleInfo.name):"",rules:[{required:!0,whitespace:!0,message:"\u8bf7\u8f93\u5165\u89d2\u8272\u540d\u79f0!"},{max:255,message:"\u89d2\u8272\u540d\u79f0\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7255\u4f4d"}]})(p.default.createElement(m.default,null))),p.default.createElement(g,(0,f.default)({},r,{label:"\u7236\u89d2\u8272\u540d\u79f0"}),o("parentId",{initialValue:v.default.notNull(t.roleInfo.parentPathUrl)?"".concat(t.roleInfo.parentPathUrl):"",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u7236\u89d2\u8272\u540d\u79f0!"}]})(p.default.createElement(c.default,{dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:t.roleData,placeholder:"\u8bf7\u9009\u62e9\u7236\u89d2\u8272\u540d\u79f0",treeDefaultExpandAll:!0}))),p.default.createElement(g,(0,f.default)({},r,{label:"\u6392\u5e8f\u7f16\u53f7"}),o("seq",{initialValue:0==t.roleInfo.seq||v.default.notNull(t.roleInfo.seq)?Number(t.roleInfo.seq):null,rules:[{type:"integer",max:9999,whitespace:!0,message:"\u8bf7\u8f93\u5165\u6570\u5b57\u4e14\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc74\u4f4d!"}]})(p.default.createElement(u.default,{style:{width:"100%"}}))),p.default.createElement(g,(0,f.default)({},r,{label:"\u63cf\u8ff0"}),o("remark",{rules:[{max:255,message:"\u63cf\u8ff0\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7255\u4f4d"}],initialValue:v.default.notNull(t.roleInfo.remark)?"".concat(t.roleInfo.remark):""})(p.default.createElement(m.default,{type:"textarea",rows:4})))))}),k=function(e){function t(e){var a;return(0,n.default)(this,t),a=(0,r.default)(this,(0,i.default)(t).call(this,e)),a.handleOk=function(){a.form.validateFields(function(e,t){if(!e&&!e){var l=t.parentId.split("/");l=l[l.length-1];var n=a.state.params.roleInfo;n.name=t.name,n.parentId=l,n.seq=t.seq,n.remark=t.remark,"\u65b0\u589e\u89d2\u8272\u4fe1\u606f"==a.state.params.title?(0,R.AddEditRole)({id:"",name:n.name?n.name:"",parentId:n.parentId?n.parentId:"",parentPathUrl:n.parentPathUrl?n.parentPathUrl:"",remark:n.remark?n.remark:"",seq:n.seq?n.seq:""}).then(function(e){a.addRoleAction(e)}):"\u7f16\u8f91\u89d2\u8272\u4fe1\u606f"==a.state.params.title&&(0,R.AddEditRole)({id:n.id,name:n.name?n.name:"",parentId:n.parentId?n.parentId:"",parentPathUrl:n.parentPathUrl?n.parentPathUrl:"",remark:n.remark?n.remark:"",seq:n.seq?n.seq:""}).then(function(e){a.editRoleAction(e)})}})},a.handleCancel=function(){a.setState({params:{title:a.state.params.title,visible:!1,roleInfo:a.state.params.roleInfo}},function(){this.form.resetFields(),this.props.changeRoleModuleState(this.state.params)})},a.addRoleAction=function(e){var t=e;t.success?a.setState({params:{title:a.state.params.title,visible:!1,roleInfo:a.state.params.roleInfo}},function(){d.default.success({title:"\u63d0\u793a\u4fe1\u606f",okText:"\u786e\u5b9a",content:"\u65b0\u589e\u89d2\u8272\u4fe1\u606f\u6210\u529f!"}),this.form.resetFields(),this.props.changeRoleModuleState(this.state.params),this.props.freshRoleData&&this.props.freshRoleData()}):d.default.error({title:"\u63d0\u793a\u4fe1\u606f",okText:"\u786e\u5b9a",content:"\u65b0\u589e\u89d2\u8272\u4fe1\u606f\u5931\u8d25!"})},a.editRoleAction=function(e){var t=e;t.success?a.setState({params:{title:a.state.params.title,visible:!1,roleInfo:a.state.params.roleInfo}},function(){d.default.success({title:"\u63d0\u793a\u4fe1\u606f",okText:"\u786e\u5b9a",content:"\u4fee\u6539\u89d2\u8272\u4fe1\u606f\u6210\u529f!"}),this.props.changeRoleModuleState(this.state.params),this.form.resetFields(),this.props.freshRoleData&&this.props.freshRoleData()}):d.default.error({title:"\u63d0\u793a\u4fe1\u606f",okText:"\u786e\u5b9a",content:"\u4fee\u6539\u89d2\u8272\u4fe1\u606f\u5931\u8d25!"})},a.saveFormRef=function(e){a.form=e},a.state={params:{title:"",visible:!1,roleInfo:{},roleData:[]}},a}return(0,s.default)(t,e),(0,o.default)(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({params:{title:e.defaultData.title,visible:e.defaultData.visible,roleInfo:e.defaultData.roleInfo,roleData:e.treeRoleData}})}},{key:"render",value:function(){var e=this.state.params,t="";if(v.default.notNull(e)){var a=e.roleInfo.pathUrl?e.roleInfo.pathUrl.split("/"):[];t=a.slice(1,a.length-2).join("/"),"\u65b0\u589e\u89d2\u8272\u4fe1\u606f"==e.title&&(t=e.roleInfo.parentId)}return e.roleInfo.parentPathUrl=t,p.default.createElement("div",{style:{paddingBottom:15}},p.default.createElement(D,{params:e,ref:this.saveFormRef,handleCancel:this.handleCancel,handleOk:this.handleOk}))}}]),t}(p.default.Component);t.default=k}}]);