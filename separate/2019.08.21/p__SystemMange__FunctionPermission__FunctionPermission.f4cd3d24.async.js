(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[60],{kx0n:function(e,t,a){"use strict";var l=a("g09b"),n=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var d=n(a("q1tI"));a("T2oS");var i=l(a("W9HT"));a("+L6B");var u=l(a("2/Rp"));a("Pwec");var r=l(a("CtXQ"));a("miYZ");var s=l(a("tsqr")),c=l(a("2Taf")),o=l(a("vZ4D")),f=l(a("l4Ni")),m=l(a("ujKo")),p=l(a("rlhR")),h=l(a("MhPg"));a("2qtc");var E=l(a("kLXV"));a("g9YV");var y=l(a("wCAj")),b=l(a("o3xw")),v=a("Nmln");a("3MCO"),a("xR6b"),a("KFsi");var g=l(a("meRS")),k=y.default.Column,C=(y.default.ColumnGroup,E.default.confirm),w=function(e){function t(e){var a;return(0,c.default)(this,t),a=(0,f.default)(this,(0,m.default)(t).call(this,e)),a.columnData=function(e){e.forEach(function(e){e["key"]=e.id,e["label"]=e.name,e["value"]=e.id,e["status"]=1==e["status"]?"\u542f\u7528":"\u672a\u542f\u7528",1==e["type"]?e["type"]="\u83dc\u5355":2==e["type"]?e["type"]="\u529f\u80fd\u6309\u94ae":e["type"]="\u5176\u5b83"}),a.setState({tableData:g.default.arrayDataToTree(e),treeData:e})},a.fetchData=function(){(0,v.InitFunction)({}).then(function(e){a.columnData(e.rows)}).then(function(){a.setState({pageLoading:!1})}).catch(function(e){console.log("\u9519\u8bef\uff1a"+e)})},a.changeAddVisible=function(){a.setState({addEditVisible:!0,isAdd:!0})},a.resetCache=function(){a.fetchData()},a.handleCancel=function(e){a.setState({addEditVisible:!1,roleVisble:!1})},a.changeEditVisible=function(e){5e3==e.key?E.default.warning({title:"\u63d0\u793a\u4fe1\u606f",content:"\u6839\u8282\u70b9\u4e0d\u80fd\u8fdb\u884c\u7f16\u8f91\u64cd\u4f5c!"}):a.setState({editValue:e,addEditVisible:!0,isAdd:!1,rowId:e.key})},a.addSubmit=function(e){a.setState({addLoading:!0,editLoading:!0});var t=a.state,l=t.isAdd,n=t.rowId;l?(0,v.AddEditFunction)({id:"",name:e.name?e.name:"",parentId:e.parentId?e.parentId:"",type:e.type?e.type:"",status:e.status?e.status:"",url:e.url?e.url:"",seq:e.seq?e.seq:"",code:e.code?e.code:"",iconCls:e.iconCls?e.iconCls:"",remark:e.remark?e.remark:""}).then(function(t){a.setState({addLoading:!1}),a.isSuccess(t,e)}).then(function(){a.fetchData()}):(0,v.AddEditFunction)({id:n,name:e.name?e.name:"",parentId:e.parentId?e.parentId:"",type:e.type?e.type:"",status:e.status?e.status:"",url:e.url?e.url:"",seq:e.seq?e.seq:"",code:e.code?e.code:"",iconCls:e.iconCls?e.iconCls:"",remark:e.remark?e.remark:""}).then(function(t){a.setState({addLoading:!1}),a.isSuccess(t,e)}).then(function(){a.fetchData()})},a.deleteUser=function(e,t){if(5e3==e)E.default.warning({title:"\u63d0\u793a\u4fe1\u606f",content:"\u6839\u8282\u70b9\u4e0d\u80fd\u8fdb\u884c\u5220\u9664\u64cd\u4f5c!"});else{var l=(0,p.default)(a),n=a.state.treeData,d=[];n.forEach(function(t){t.parentId==e&&d.push(t.id)}),d.push(e),C({title:"\u529f\u80fd\u6743\u9650\u5220\u9664",content:d.length>1?"\u4f60\u662f\u5426\u786e\u5b9a\u5220\u9664\u3010".concat(t,"\u3011\u4ee5\u53ca\u5176\u5b50\u529f\u80fd\u6743\u9650\u5417\uff1f"):"\u4f60\u662f\u5426\u786e\u5b9a\u5220\u9664\u3010".concat(t,"\u3011\u5417\uff1f"),cancelText:"\u53d6\u6d88",okText:"\u786e\u5b9a",onOk:function(){(0,v.DeleteFunction)({ids:d}).then(function(e){l.isSuccess(e)}).then(function(){l.fetchData()})}})}},a.isSuccess=function(e,t){if(e.success)a.setState({addEditVisible:!1,addLoading:!1,pageLoading:!0});else{var l=e.msg;s.default.error(l||"\u64cd\u4f5c\u5931\u8d25")}},a.componentDidMount=function(){var e=a.state;e.page,e.pageSize;a._isMounted=!0,a.fetchData()},a.componentWillUnMount=function(){a._isMounted=!1},a.renderTypeTable=function(){return d.default.createElement(y.default,{dataSource:a.state.tableData,pagination:!1,rowClassName:"per-table-row",indentSize:8,scroll:{y:500},defaultExpandAllRows:!0},d.default.createElement(k,{title:"\u6743\u9650\u540d\u79f0",dataIndex:"name",key:"name",width:"18%",className:"per-name-col",render:function(e,t){return d.default.createElement("a",{title:t.name,className:"functionHover"},t.name)}}),d.default.createElement(k,{title:"\u6743\u9650\u7c7b\u578b",dataIndex:"type",key:"type",width:"9%"}),d.default.createElement(k,{title:"\u6743\u9650\u72b6\u6001",dataIndex:"status",key:"status",width:"9%"}),d.default.createElement(k,{title:"\u6743\u9650\u8def\u5f84",dataIndex:"url",key:"url",width:"14%",render:function(e,t){return d.default.createElement("a",{title:t.url,className:"functionHover"},t.url)}}),d.default.createElement(k,{title:"\u63cf\u8ff0",dataIndex:"remark",key:"remark",width:"15%",render:function(e,t){return d.default.createElement("a",{title:t.remark,className:"functionHover"},t.remark)}}),d.default.createElement(k,{title:"\u6743\u9650\u7f16\u7801",dataIndex:"code",key:"code",width:"9%"}),d.default.createElement(k,{title:"\u6392\u5e8f\u7f16\u53f7",dataIndex:"seq",key:"seq",width:"9%"}),d.default.createElement(k,{title:"\u6743\u9650\u5730\u5740",dataIndex:"pathUrl",key:"pathUrl",width:"10%",render:function(e,t){return d.default.createElement("a",{title:t.pathUrl,className:"functionHover"},t.pathUrl)}}),d.default.createElement(k,{className:"sunm-text-center",title:"\u64cd\u4f5c",key:"action",width:"",render:function(e,t){return d.default.createElement("span",null,d.default.createElement("a",{title:"\u7f16\u8f91\u6743\u9650",onClick:a.changeEditVisible.bind((0,p.default)(a),t)},d.default.createElement(r.default,{type:"form",className:"sys-icon sys-padd"})),d.default.createElement("a",{title:"\u5220\u9664\u6743\u9650",onClick:a.deleteUser.bind((0,p.default)(a),t.key,t.name)},d.default.createElement(r.default,{type:"delete",className:"sys-icon sys-padd"})))}}))},a.state={tableData:[],addEditVisible:!1,isAdd:!0,rowId:"",rowIds:[],addLoading:!1,editValue:[],treeData:[],pageLoading:!0},a}return(0,h.default)(t,e),(0,o.default)(t,[{key:"render",value:function(){var e=this.state,t=e.addEditVisible,a=e.isAdd,l=e.addLoading,n=e.editValue,s=(e.roleVisble,e.tableData),c=e.treeData,o=e.pageLoading;return d.default.createElement("div",{className:"sunm-content sunm-standard-content"},d.default.createElement("div",{className:"sunm-inner-content top"},d.default.createElement("div",{className:"sunm-inner-column"},d.default.createElement("div",{className:"sunm-inner-column-cont"},d.default.createElement(u.default,{onClick:this.changeAddVisible.bind(this)},d.default.createElement(r.default,{type:"plus",className:"sys-icon"}),"\u65b0\u589e\u6743\u9650"),d.default.createElement(u.default,{onClick:this.resetCache.bind(this,!0),className:"mar-left"},d.default.createElement(r.default,{type:"sync",className:"sys-icon"}),"\u91cd\u7f6e\u7f13\u5b58"),d.default.createElement("div",{id:"per-table ",className:"table-comment"},o?d.default.createElement(i.default,{style:{display:"block",padding:"200px 0"}}):this.renderTypeTable()),d.default.createElement(b.default,{isAdd:a,addEditVisible:t,addSubmit:this.addSubmit.bind(this),addLoading:l,handleCancel:this.handleCancel.bind(this),editValue:n,tableData:s,treeData:c})))))}}]),t}(d.Component);t.default=w},o3xw:function(e,t,a){"use strict";var l=a("g09b"),n=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var d=l(a("kLXV"));a("+L6B");var i=l(a("2/Rp"));a("giR+");var u=l(a("fyUT"));a("nRaC");var r=l(a("5RzL")),s=l(a("jehZ")),c=l(a("2Taf")),o=l(a("vZ4D")),f=l(a("l4Ni")),m=l(a("ujKo")),p=l(a("MhPg"));a("5NDa");var h=l(a("5rEg"));a("OaEy");var E=l(a("2fM7"));a("y8nQ");var y=l(a("Vl3Y"));a("7Kak");var b=l(a("9yH6")),v=n(a("q1tI"));a("6zIO");l(a("meRS")),b.default.Group;var g,k,C,w=y.default.Item,V=E.default.Option,D=h.default.TextArea,S=(g=y.default.create(),g((C=function(e){function t(){var e,a;(0,c.default)(this,t);for(var l=arguments.length,n=new Array(l),d=0;d<l;d++)n[d]=arguments[d];return a=(0,f.default)(this,(e=(0,m.default)(t)).call.apply(e,[this].concat(n))),a.state={visible:!1,isAdd:!0,addLoading:!1,editValue:a.props.editValue,parentValue:""},a.handleClose=function(){a.props.handleCancel&&a.props.handleCancel()},a.handleSubmit=function(e,t){new FormData;e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,t){e||a.props.addSubmit(t)})},a}return(0,p.default)(t,e),(0,o.default)(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({visible:e.addEditVisible,addLoading:e.addLoading,isAdd:e.isAdd,key:e.key,editValue:e.editValue})}},{key:"render",value:function(){var e={labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:18}}},t={wrapperCol:{xs:{span:24,offset:0},sm:{span:24,offset:0}}},a=this.props.form.getFieldDecorator,l=this.props,n=l.isAdd,c=l.tableData,o=l.treeData,f=this.state,m=f.editValue,p=(f.parentValue,f.addLoading),b={name:n?null:m.name,parentId:function(e){var t="";return e.forEach(function(e){e.id==m.parentId&&(t=e.key)}),t},type:function(){return n?"1":(m.type="\u83dc\u5355")?"1":(m.type="\u529f\u80fd\u6309\u94ae")?"2":"9"},status:function(){return n?"1":"\u542f\u7528"==m.status?"1":"2"},url:n?null:m.url,code:n?null:m.code,seq:n?null:m.seq,iconCls:n?null:m.iconCls,remark:n?null:m.remark};return v.default.createElement("div",null,v.default.createElement(d.default,{title:this.state.isAdd?"\u65b0\u589e\u6743\u9650":"\u7f16\u8f91\u6743\u9650",visible:this.state.visible,footer:null,onCancel:this.handleClose,destroyOnClose:!0,maskClosable:!1},v.default.createElement(y.default,{onSubmit:this.handleSubmit},v.default.createElement(w,(0,s.default)({},e,{label:"\u6743\u9650\u540d\u79f0",colon:!0}),a("name",{rules:[{required:!0,message:"\u6743\u9650\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a"},{max:255,message:"\u6743\u9650\u540d\u79f0\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7255\u4f4d"}],initialValue:b.name})(v.default.createElement(h.default,{placeholder:"\u8bf7\u8f93\u5165\u6743\u9650\u540d\u79f0"}))),v.default.createElement(w,(0,s.default)({},e,{label:"\u7236\u6743\u9650\u540d\u79f0",colon:!0}),a("parentId",{rules:[{required:!0,message:"\u7236\u6743\u9650\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a"}],initialValue:b.parentId(o)})(v.default.createElement(r.default,{style:{width:300},dropdownStyle:{maxHeight:300,overflow:"auto"},treeData:c}))),v.default.createElement(w,(0,s.default)({},e,{label:"\u6743\u9650\u7c7b\u578b",colon:!0}),a("type",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6743\u9650\u7c7b\u578b"}],initialValue:b.type()})(v.default.createElement(E.default,null,v.default.createElement(V,{value:"1"},"\u83dc\u5355"),v.default.createElement(V,{value:"2"},"\u529f\u80fd\u6309\u94ae"),v.default.createElement(V,{value:"9"},"\u5176\u5b83")))),v.default.createElement(w,(0,s.default)({},e,{label:"\u6743\u9650\u72b6\u6001",colon:!0}),a("status",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6743\u9650\u72b6\u6001"}],initialValue:b.status()})(v.default.createElement(E.default,null,v.default.createElement(V,{value:"1"},"\u542f\u7528"),v.default.createElement(V,{value:"2"},"\u672a\u542f\u7528")))),v.default.createElement(w,(0,s.default)({},e,{label:"\u6743\u9650\u8def\u5f84",colon:!0}),a("url",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6743\u9650\u8def\u5f84"},{max:255,message:"\u6743\u9650\u8def\u5f84\u4e0d\u80fd\u8d85\u8fc7255\u4f4d"}],initialValue:b.url})(v.default.createElement(h.default,{placeholder:"\u8bf7\u8f93\u5165\u6743\u9650\u5730\u5740"}))),v.default.createElement(w,(0,s.default)({},e,{label:"\u6743\u9650\u7f16\u7801",colon:!0}),a("code",{rules:[{required:!1},{max:255,message:"\u6743\u9650\u7f16\u7801\u4e0d\u80fd\u8d85\u8fc7255\u4f4d"}],initialValue:b.code})(v.default.createElement(h.default,{placeholder:"\u8bf7\u8f93\u5165\u6743\u9650\u7f16\u7801"}))),v.default.createElement(w,(0,s.default)({},e,{label:"\u6392\u5e8f\u7f16\u53f7",colon:!0}),a("seq",{rules:[{type:"integer",max:9999,whitespace:!0,message:"\u8bf7\u8f93\u5165\u6570\u5b57\u4e14\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc74\u4f4d!"}],initialValue:b.seq})(v.default.createElement(u.default,{placeholder:"\u8bf7\u8f93\u5165\u6392\u5e8f\u7f16\u53f7"}))),v.default.createElement(w,(0,s.default)({},e,{label:"\u56fe\u6807\u8def\u5f84",colon:!0}),a("iconCls",{rules:[{required:!1,message:"\u8bf7\u8f93\u5165\u56fe\u6807\u8def\u5f84"},{max:255,message:"\u56fe\u6807\u8def\u5f84\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7255\u4f4d"}],initialValue:b.iconCls})(v.default.createElement(h.default,{placeholder:""}))),v.default.createElement(w,(0,s.default)({},e,{label:"\u63cf\u8ff0",colon:!0}),a("remark",{rules:[{required:!1},{max:255,message:"\u63cf\u8ff0\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7255\u4f4d"}],initialValue:b.remark})(v.default.createElement(D,{rows:2}))),v.default.createElement(w,(0,s.default)({className:"form-btn-list"},t),v.default.createElement(i.default,{type:"primary",htmlType:"submit",loading:p},"\u4fdd\u5b58"),v.default.createElement(i.default,{type:"ghost",onClick:this.handleClose},"\u53d6\u6d88")))))}}]),t}(v.Component),k=C))||k);t.default=S}}]);