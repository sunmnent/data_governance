(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[37],{"OI+E":function(e,t,a){"use strict";var n=a("tAuX"),l=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var r=l(a("kLXV")),o=l(a("2Taf")),i=l(a("vZ4D")),u=l(a("l4Ni")),d=l(a("ujKo")),c=l(a("MhPg")),s=n(a("q1tI")),f=function(e){function t(){var e,a;(0,o.default)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return a=(0,u.default)(this,(e=(0,d.default)(t)).call.apply(e,[this].concat(l))),a.state={iframeUrl:""},a}return(0,c.default)(t,e),(0,i.default)(t,[{key:"componentDidUpdate",value:function(e,t){if(this.props.data.taskCode!==e.data.taskCode&&this.props.data.taskCode){var a=this.props.data,n=a.taskCode,l=a.runSeq,r="./dataflow/report.html?taskCode=".concat(n,"&runSeq=").concat(l);this.setState({iframeUrl:r})}}},{key:"render",value:function(){return s.default.createElement(r.default,{title:"\u8fd0\u884c\u62a5\u544a",visible:!!this.props.data.taskCode,onCancel:this.props.handleCancel,footer:null,width:1e3},s.default.createElement("iframe",{src:this.state.iframeUrl,style:{width:"100%",minHeight:600,border:"none",margin:"-15px"}}))}}]),t}(s.Component),p=f;t.default=p},oBV5:function(e,t,a){"use strict";var n=a("g09b"),l=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("g9YV");var r=n(a("wCAj"));a("Pwec");var o,i,u,d=n(a("CtXQ")),c=n(a("2Taf")),s=n(a("vZ4D")),f=n(a("l4Ni")),p=n(a("ujKo")),h=n(a("rlhR")),m=n(a("MhPg")),v=l(a("q1tI")),g=a("MuoO"),k=n(a("Qyje")),y=n(a("tSUh")),C=a("ArA+"),w=n(a("OI+E")),b={0:"\u8fd0\u884c\u4e2d",1:"\u5b8c\u6210",2:"\u8fd0\u884c\u5931\u8d25",3:"\u8fd0\u884c\u5f02\u5e38",4:"\u91cd\u65b0\u6267\u884c"},D={1:"\u6e05\u6d17",2:"\u96c6\u6210",3:"\u7ed3\u6784\u5316",4:"\u534a\u7ed3\u6784\u5316",5:"\u975e\u7ed3\u6784\u5316",6:"\u6570\u636e\u9884\u5904\u7406",7:"\u6587\u4ef6\u4e0a\u4f20\u89e3\u6790",11:"\u722c\u866b"},M=(o=(0,g.connect)(function(e){var t=e.prehandle;return{prehandle:t}}),o((u=function(e){function t(){var e,a;(0,c.default)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return a=(0,f.default)(this,(e=(0,p.default)(t)).call.apply(e,[this].concat(l))),a.state={reportModalData:{}},a.columns=[{title:"\u4efb\u52a1",dataIndex:"taskCode"},{title:"\u4efb\u52a1\u7c7b\u578b",dataIndex:"taskType",render:function(e){return D[e]}},{title:"\u72b6\u6001",dataIndex:"runStatus",render:function(e){return b[e]}},{title:"\u5f00\u59cb\u65f6\u95f4",dataIndex:"createTime"},{title:"\u7ed3\u675f\u65f6\u95f4",dataIndex:"endTime"},{title:"\u64cd\u4f5c",key:"action",render:function(e,t){return v.default.createElement("span",null,v.default.createElement(d.default,{type:"file-text",title:"\u65e5\u5fd7",className:"can-click",style:{marginRight:5},onClick:a.viewLog.bind((0,h.default)(a),t)}),v.default.createElement(d.default,{type:"snippets",title:"\u8fd0\u884c\u62a5\u544a",className:"can-click",onClick:a.showModal.bind((0,h.default)(a),t)}))}}],a.fetchData=function(e){var t=k.default.parse(a.props.location.search.slice(1)),n=t.taskId;a.props.dispatch({type:"prehandle/runloglist",payload:{taskId:n,pageSize:10,pageNum:e}}).then(function(e){e.list&&e.list[0]&&0===e.list[0].runStatus?a.timer=setTimeout(function(){a.fetchData(e.pageNum)},2e3):a.clearTimer()})},a.clearTimer=function(){a.timer&&clearTimeout(a.timer)},a.changeTable=function(e){a.fetchData(e.current)},a.viewLog=function(e){C.router.push("/prehandle/logContent?runSeq=".concat(e.runSeq))},a.showModal=function(e){a.setState({reportModalData:e})},a.handleCancel=function(){a.setState({reportModalData:{}})},a}return(0,m.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){this.fetchData(1)}},{key:"componentWillUnmount",value:function(){this.clearTimer()}},{key:"render",value:function(){var e=this.props.prehandle.logList,t=e.list,a=e.total,n=e.pageNum,l=this.state.reportModalData;return v.default.createElement("div",null,v.default.createElement(y.default,null),v.default.createElement(r.default,{columns:this.columns,dataSource:t,pagination:{total:a,current:n},onChange:this.changeTable,rowKey:"id"}),v.default.createElement(w.default,{data:l,handleCancel:this.handleCancel}))}}]),t}(v.Component),i=u))||i),S=M;t.default=S}}]);