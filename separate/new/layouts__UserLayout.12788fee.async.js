(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{BOD2:function(e,a,t){e.exports={container:"container___3rwDa",content:"content___3Paa8",top:"top___1W42Y",header:"header___1cl15",logo:"logo___29nS6",title:"title___3DxND",desc:"desc___2YLHe"}},jH8a:function(e,a,t){"use strict";var n=t("tAuX"),r=t("g09b");Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,t("miYZ");var o=r(t("tsqr")),l=r(t("Y/ft")),u=r(t("gWZ8")),c=r(t("2Taf")),i=r(t("vZ4D")),d=r(t("l4Ni")),f=r(t("ujKo")),s=r(t("MhPg")),g=n(t("q1tI")),h=t("nsBq"),m=r(t("BOD2")),y=r(t("Qyje")),M=t("+n12"),S=function(e){function a(){var e,t;(0,c.default)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=(0,d.default)(this,(e=(0,f.default)(a)).call.apply(e,[this].concat(r))),t.handleModelManageMenu=function(e){e=e.filter(function(e){return"\u6570\u636e\u6982\u89c8"!==e.name&&"\u68c0\u6838\u89c4\u5219\u7ba1\u7406"!==e.name}),e=e.map(function(e){var a=e;return delete a.iconUrl,a});var a,t,n,r=[],o=(0,M.arrayDataToTree)(e);o[0].children.forEach(function(e){"\u5143\u6570\u636e\u7ba1\u7406"!==e.name&&"\u8d44\u6e90\u76ee\u5f55"!==e.name&&"\u6a21\u578b\u7ba1\u7406"!==e.name||r.push(e),"\u5143\u6570\u636e\u7ba1\u7406"===e.name&&(t=e.id),"\u6570\u636e\u6807\u51c6\u7ba1\u7406"===e.name&&(a=e.children)}),a&&(a=a.map(function(e){var a=e;return a.parentId=t,a.url=a.url.replace(/\/[^\/]*\//g,"/yuanData/"),e.children&&e.children.forEach(function(e){e.url=e.url.replace(/\/[^\/]*\//g,"/yuanData/")}),a}),n=a[a.length-1],a.pop()),e.forEach(function(e){"\u6570\u636e\u5ba1\u6838\u7ba1\u7406"===e.name&&r.push(e)}),r.forEach(function(e,t){"\u5143\u6570\u636e\u7ba1\u7406"===e.name&&(r[t].children=[].concat((0,u.default)(a),(0,u.default)(e.children),[n]))});var c=0;e.forEach(function(e){"\u6570\u636e\u6a21\u578b"===e.name&&r.unshift(e),"\u4e2d\u5fc3\u5e93"===e.name&&0===c&&(r.unshift(e),c+=1)});var i=r.filter(function(e){return"\u6a21\u578b\u7ba1\u7406"!==e.name});if("undefined"!==(0,M.getQueryString)("state")){var d=JSON.parse(decodeURI((0,M.getQueryString)("state"))),f=d.path,s=(0,l.default)(d,["path"]);"localhost"===location.hostname?(console.log("localhost"),window.location.href="/#".concat(f,"?").concat(y.default.stringify(s))):(console.log("deal"),console.log(d),window.location.href="/dataManage/#".concat(f,"?").concat(y.default.stringify(s)))}return i},t.handleMasterDataManageMenu=function(e){var a=[],t=(0,M.arrayDataToTree)(e);return t[0].children.forEach(function(e){"\u4e3b\u6570\u636e\u7ba1\u7406"===e.name&&(a=e.children)}),a},t.handleQualityManageMenu=function(e){e=(0,M.arrayDataToTree)(e);var a=[];return e[0].children.forEach(function(e){"\u6570\u636e\u8d28\u91cf\u7ba1\u7406"===e.name&&(a=e.children)}),a},t.handleSystemManageMenu=function(e){e=(0,M.arrayDataToTree)(e);var a=[];return e[0].children.forEach(function(e){"\u7cfb\u7edf\u7ba1\u7406"===e.name&&(a=e.children)}),a},t}return(0,s.default)(a,e),(0,i.default)(a,[{key:"componentDidMount",value:function(){var e=this,a="undefined"===(0,M.getQueryString)("state")||!1;if((0,M.getQueryString)("isIframe")){sessionStorage.isIframe=!0,localStorage.nameCn=decodeURI((0,M.getQueryString)("nameCn")),localStorage.token=(0,M.getQueryString)("token"),localStorage.userID=(0,M.getQueryString)("userID"),localStorage.userName=(0,M.getQueryString)("userName"),localStorage.authority=(0,M.getQueryString)("authority"),localStorage.admin="admin"===(0,M.getQueryString)("authority")||!1,localStorage.module=(0,M.getQueryString)("module");var t={accountId:(0,M.getQueryString)("userID"),token:(0,M.getQueryString)("token")};(0,h.getMenu)(t).then(function(t){if(t.success){var n,r=!0;switch((0,M.getQueryString)("module")){case"ModelManage":n=e.handleModelManageMenu(t.obj),r=a;break;case"MasterDataManage":n=e.handleMasterDataManageMenu(t.obj);break;case"QualityManage":n=e.handleQualityManageMenu(t.obj);break;case"SystemManage":n=e.handleSystemManageMenu(t.obj);break;default:n=[];break}location.hash.startsWith("#/resourceDirectory/resourceDetails")&&localStorage.menu!==JSON.stringify(n)&&(window.location.href=location.href),localStorage.menu=JSON.stringify(n),r&&("localhost"===location.hostname?window.location.href="/":window.location.href="/dataManage")}else o.default.error(t.msg)})}}},{key:"render",value:function(){return(0,M.getQueryString)("isIframe")?"":g.default.createElement("div",{className:m.default.container},g.default.createElement("div",{className:m.default.content},g.default.createElement(g.Fragment,null,g.default.createElement("div",{className:m.default.top},g.default.createElement("div",{className:m.default.header},g.default.createElement("span",{className:m.default.title},window.config.schoolName,"-\u6570\u636e\u6cbb\u7406\u5e73\u53f0"))),this.props.children)))}}]),a}(g.default.PureComponent),p=S;a.default=p}}]);