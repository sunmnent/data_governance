(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[63],{DnCW:function(e,t,a){"use strict";var l=a("g09b"),s=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a("q1tI"));a("2qtc");var d=l(a("kLXV")),i=l(a("meRS")),r=l(a("IAP5")),u=a("Nmln"),c="";class o extends n.Component{constructor(e){super(e),this.handleOK=(()=>{(0,u.SaveUserRole)({accountId:this.state.accountId,ids:c}).then(e=>{return this.props.handleCancel&&this.props.handleCancel(),e}).then(e=>{this.updataUserRoleDataAction(e)})}),this.updataUserRoleDataAction=(e=>{e.success?d.default.success({title:"\u63d0\u793a\u4fe1\u606f",okText:"\u786e\u5b9a",content:"\u4fdd\u5b58\u8d26\u6237\u3010".concat(this.state.userName,"\u3011\u7684\u89d2\u8272\u6210\u529f!")}):d.default.error({title:"\u63d0\u793a\u4fe1\u606f",okText:"\u786e\u5b9a",content:n.default.createElement("div",null,n.default.createElement("p",null,"\u4fdd\u5b58\u8d26\u6237\u3010",this.state.userName,"\u3011\u7684\u89d2\u8272\u5931\u8d25!"))})}),this.handleClose=(()=>{this.props.handleCancel&&this.props.handleCancel()}),this.getCheckedNodes=(e=>{c=i.default.notNull(e)?i.default.jointIds(e):""}),this.state={accountId:[],userName:""}}UNSAFE_componentWillReceiveProps(e){this.setState({accountId:e.id,userName:e.roleName})}render(){var e=this.props,t=e.visible,a=e.roleData,l=[{title:"\u89d2\u8272\u540d\u79f0",dataKey:"name",width:"40%"},{title:"\u63cf\u8ff0",dataKey:"remark",width:"60%"}],s={levels:2,check:!0,columns:l,nodes:i.default.notNull(a)?i.default.arrayDataToTree(a):null,selectTreeId:"",getCheckedNodes:this.getCheckedNodes,scroll:{y:$(window).height()-200},type:"radio"};return n.default.createElement(d.default,{title:"\u7528\u6237\u89d2\u8272",visible:t,okText:"\u4fdd\u5b58",width:"55%",style:{top:20},onCancel:this.handleClose,destroyOnClose:!0,onOk:this.handleOK},n.default.createElement("div",{style:{minHeight:$(window).height()-200}},i.default.notNull(a)?n.default.createElement(r.default,s):null))}}t.default=o},PZtv:function(e,t,a){"use strict";var l=a("g09b"),s=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("2qtc");var n=l(a("kLXV"));a("+L6B");var d=l(a("2/Rp")),i=l(a("jehZ"));a("5NDa");var r=l(a("5rEg"));a("OaEy");var u=l(a("2fM7"));a("y8nQ");var c=l(a("Vl3Y"));a("7Kak");var o,h,m,f=l(a("9yH6")),p=s(a("q1tI"));a("6zIO");var E=f.default.Group,v=c.default.Item,b=u.default.Option,C=(o=c.default.create(),o((m=class extends p.Component{constructor(){super(...arguments),this.state={visible:!1,isAdd:!0,addLoading:!1,editValue:this.props.editValue},this.handleClose=(()=>{this.props.handleCancel&&this.props.handleCancel()}),this.handleEditData=((e,t,a)=>{return"username"==t?a?null:e.username:"nameCn"==t?a?null:e.nameCn:"sex"==t?a?1:e.sex:"phone"==t?a?null:e.phone:"accountCode"==t?a?null:e.accountCode:"cellPhone"==t?a?null:e.cellPhone:a?1:e.active}),this.handleSubmit=((e,t)=>{e.preventDefault(),this.props.form.validateFieldsAndScroll((e,t)=>{e||this.props.addSubmit(t)})})}UNSAFE_componentWillReceiveProps(e){this.setState({visible:e.addEditVisible,addLoading:e.addLoading,isAdd:e.isAdd,key:e.key,editValue:e.editValue})}render(){var e={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:18}}},t={wrapperCol:{xs:{span:24,offset:0},sm:{span:24,offset:0}}},a=this.props.form.getFieldDecorator,l=this.props.isAdd,s=this.state,o=s.editValue,h=s.addLoading;return p.default.createElement("div",null,p.default.createElement(n.default,{title:this.state.isAdd?"\u65b0\u589e\u7528\u6237":"\u7f16\u8f91\u7528\u6237",visible:this.state.visible,footer:null,onCancel:this.handleClose,destroyOnClose:!0,maskClosable:!1},p.default.createElement(c.default,{onSubmit:this.handleSubmit},p.default.createElement(v,(0,i.default)({},e,{label:"\u7528\u6237\u540d",colon:!0}),a("username",{rules:[{required:!0,message:"\u7528\u6237\u540d\u4e0d\u80fd\u4e3a\u7a7a"}],initialValue:this.handleEditData(o,"username",l)})(p.default.createElement(r.default,{placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"}))),p.default.createElement(v,(0,i.default)({},e,{label:"\u59d3\u540d",colon:!0}),a("nameCn",{rules:[{required:!0,message:"\u59d3\u540d\u4e0d\u80fd\u4e3a\u7a7a"}],initialValue:this.handleEditData(o,"nameCn",l)})(p.default.createElement(r.default,{placeholder:"\u8bf7\u8f93\u5165\u59d3\u540d"}))),p.default.createElement(v,(0,i.default)({},e,{label:"\u6027\u522b",colon:!0}),a("sex",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6027\u522b"}],initialValue:this.handleEditData(o,"sex",l)})(p.default.createElement(E,null,p.default.createElement(f.default,{value:1},"\u7537"),p.default.createElement(f.default,{value:2},"\u5973")))),p.default.createElement(v,(0,i.default)({},e,{label:"\u5b66\u53f7/\u6559\u5de5\u53f7",colon:!0}),a("accountCode",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5b66\u53f7/\u6559\u5de5\u53f7"}],initialValue:this.handleEditData(o,"accountCode",l)})(p.default.createElement(r.default,{placeholder:"\u8bf7\u8f93\u5165\u5b66\u53f7/\u6559\u5de5\u53f7"}))),p.default.createElement(v,(0,i.default)({},e,{label:"\u624b\u673a\u53f7",colon:!0}),a("phone",{rules:[{required:!1},{pattern:"^((13[0-9])|(14[5|7])|(15([0-3]|[5-9]))|(18[0,5-9]))\\d{8}$",message:"\u624b\u673a\u683c\u5f0f\u4e0d\u6b63\u786e"}],initialValue:this.handleEditData(o,"phone",l)})(p.default.createElement(r.default,{placeholder:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7\u7801"}))),p.default.createElement(v,(0,i.default)({},e,{label:"\u90ae\u7bb1",colon:!0}),a("cellPhone",{rules:[{type:"email",message:"\u90ae\u7bb1\u683c\u5f0f\u4e0d\u6b63\u786e"}],initialValue:this.handleEditData(o,"cellPhone",l)})(p.default.createElement(r.default,{placeholder:"\u8bf7\u8f93\u5165\u90ae\u7bb1"}))),p.default.createElement(v,(0,i.default)({},e,{label:"\u6fc0\u6d3b\u72b6\u6001",colon:!0}),a("active",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6fc0\u6d3b\u72b6\u6001"}],initialValue:this.handleEditData(o,"active",l)})(p.default.createElement(u.default,null,p.default.createElement(b,{value:1},"\u5df2\u6fc0\u6d3b"),p.default.createElement(b,{value:2},"\u672a\u6fc0\u6d3b")))),p.default.createElement(v,(0,i.default)({className:"form-btn-list"},t),p.default.createElement(d.default,{type:"primary",htmlType:"submit",loading:h},"\u4fdd\u5b58"),p.default.createElement(d.default,{type:"ghost",onClick:this.handleClose},"\u53d6\u6d88")))))}},h=m))||h);t.default=C},pj3F:function(e,t,a){"use strict";var l=a("g09b"),s=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a("q1tI"));a("+L6B");var d=l(a("2/Rp"));a("Pwec");var i=l(a("CtXQ"));a("miYZ");var r=l(a("tsqr")),u=l(a("p0pE"));a("2qtc");var c=l(a("kLXV"));a("g9YV");var o=l(a("wCAj")),h=l(a("PZtv")),m=l(a("DnCW")),f=l(a("zUcB")),p=a("Nmln");a("3MCO"),a("xR6b"),a("KFsi");var E=o.default.Column,v=(o.default.ColumnGroup,c.default.confirm);class b extends n.Component{constructor(e){super(e),this.columnData=(e=>{var t=e.map(e=>({key:e.id,username:e.username,nameCn:e.nameCn,sex:1==e.sex?"\u7537":"\u5973",active:1==e.active?"\u5df2\u6fc0\u6d3b":"\u672a\u6fc0\u6d3b"}));this.setState({tableData:t})}),this.fetchData=(()=>{(0,p.UserList)({}).then(e=>{this.columnData(e.rows),this.setState({pageSize:e.totalRows})}).catch(e=>{console.log("\u9519\u8bef\uff1a"+e)})}),this.changeAddVisible=(()=>{this.setState({addEditVisible:!0,isAdd:!0})}),this.changeEditVisible=(e=>{(0,p.UserList)({Q_username_like:e.username}).then(t=>{var a=[];t.rows.forEach(t=>{t.id==e.key&&(a=t)}),this.setState({editValue:a})}).then(()=>{this.setState({addEditVisible:!0,isAdd:!1,rowId:e.key})})}),this.changeUserRole=((e,t)=>{(0,p.GetUserRole)({accountId:e}).then(e=>{console.log(e.obj),this.setState({roleData:e.obj})}).then(()=>{this.setState({roleVisble:!0,roleId:e,roleName:t.username})})}),this.changeFunction=((e,t)=>{(0,p.CheckUserPermissions)({accountId:e}).then(e=>{this.setState({functionData:e.obj})}).then(()=>{this.setState({functionVisble:!0,functionId:e,functionName:t.username})})}),this.handleCancel=(e=>{this.setState({addEditVisible:!1,roleVisble:!1,functionVisble:!1})}),this.deleteUser=((e,t)=>{var a=this;v({title:"\u7528\u6237\u5220\u9664",content:"\u4f60\u662f\u5426\u786e\u5b9a\u5220\u9664\u3010".concat(t,"\u3011\u7528\u6237\uff1f"),cancelText:"\u53d6\u6d88",okText:"\u786e\u5b9a",onOk(){(0,p.DeleteUser)({ids:e,type:2}).then(e=>{a.isSuccess(e)}).then(()=>{a.fetchData()})}})}),this.initPassword=((e,t)=>{var a=this;v({title:"\u521d\u59cb\u5316\u5bc6\u7801",content:"\u4f60\u662f\u5426\u786e\u5b9a\u521d\u59cb\u5316\u3010".concat(t,"\u3011\u7684\u5bc6\u7801\u5417\uff1f"),cancelText:"\u53d6\u6d88",okText:"\u786e\u5b9a",onOk(){(0,p.InitPassword)({ids:e,flag:!0}).then(e=>{a.userSeccess("\u521d\u59cb\u5316\u5bc6\u7801\u6210\u529f\uff0c\u60a8\u7684\u5bc6\u7801\u662f:abcd1234")})}})}),this.userSeccess=(e=>{c.default.success({content:e,okText:"\u77e5\u9053\u4e86"})}),this.addSubmit=(e=>{this.setState({addLoading:!0,editLoading:!0});var t=this.state,a=t.isAdd,l=t.rowId;a?(0,p.AddUser)((0,u.default)({},e,{delStatus:2})).then(t=>{t&&t.success?(this.setState({addLoading:!1}),this.isSuccess(t,e),(0,p.InitPassword)({ids:t.obj.id,flag:!0}).then(e=>{this.userSeccess("\u65b0\u5efa\u7528\u6237\u6210\u529f\uff0c\u60a8\u7684\u5bc6\u7801\u662f:abcd1234")})):r.default.error(t.msg)}).then(()=>{this.fetchData()}):(0,p.AddUser)((0,u.default)({id:l},e,{delStatus:2})).then(t=>{this.setState({addLoading:!1}),this.isSuccess(t,e)}).then(()=>{this.fetchData()})}),this.isSuccess=((e,t)=>{if(e.success)this.setState({addEditVisible:!1,addLoading:!1});else if(t.username.length>255)r.default.error("\u7528\u6237\u540d\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7255\u4f4d");else if(t.nameCn.length>255)r.default.error("\u59d3\u540d\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7255\u4f4d");else{var a=e.msg;r.default.error(a||"\u64cd\u4f5c\u5931\u8d25")}}),this.componentDidMount=(()=>{var e=this.state,t=e.page,a=e.pageSize;this._isMounted=!0,this.fetchData(),(0,p.UserList)({page:t,pageSize:a})}),this.componentWillUnMount=(()=>{this._isMounted=!1}),this.renderTypeTable=(()=>{return n.default.createElement(o.default,{dataSource:this.state.tableData,className:"table-sty sunm-table"},n.default.createElement(E,{title:"\u7528\u6237\u540d",dataIndex:"username",key:"username",width:"20%",render:(e,t)=>n.default.createElement("a",{title:t.username,className:"functionHover"},t.username)}),n.default.createElement(E,{title:"\u59d3\u540d",dataIndex:"nameCn",key:"nameCn",width:"20%",render:(e,t)=>n.default.createElement("a",{title:t.nameCn,className:"functionHover"},t.nameCn)}),n.default.createElement(E,{title:"\u6027\u522b",dataIndex:"sex",key:"sex",width:"10%"}),n.default.createElement(E,{title:"\u6fc0\u6d3b\u72b6\u6001",dataIndex:"active",key:"active",width:"10%"}),n.default.createElement(E,{className:"sunm-text-center",title:"\u64cd\u4f5c",key:"action",width:"40%",render:(e,t)=>n.default.createElement("span",null,n.default.createElement("a",{title:"\u7f16\u8f91\u7528\u6237",onClick:this.changeEditVisible.bind(this,t)},n.default.createElement(i.default,{type:"form",className:"sys-icon sys-padd"})),n.default.createElement("a",{title:"\u521d\u59cb\u5316\u5bc6\u7801",onClick:this.initPassword.bind(this,t.key,t.username)},n.default.createElement(i.default,{type:"sync",className:"sys-icon sys-padd"})),n.default.createElement("a",{title:"\u7528\u6237\u89d2\u8272",onClick:this.changeUserRole.bind(this,t.key,t)},n.default.createElement(i.default,{type:"user-add",className:"sys-icon sys-padd"})),n.default.createElement("a",{title:"\u529f\u80fd\u6743\u9650"},n.default.createElement(i.default,{type:"setting",className:"sys-icon sys-padd",onClick:this.changeFunction.bind(this,t.key,t)})),n.default.createElement("a",{title:"\u5220\u9664\u7528\u6237",onClick:this.deleteUser.bind(this,t.key,t.username)},n.default.createElement(i.default,{type:"delete",className:"sys-icon sys-padd"})))}))}),this.state={tableData:[],page:1,pageSize:"",addEditVisible:!1,isAdd:!0,rowId:"",rowIds:[],addLoading:!1,editValue:[],roleVisble:!1,roleData:[],functionVisble:!1,functionData:[],roleId:[],roleName:"",functionId:[],functionName:""}}render(){var e=this.state,t=e.addEditVisible,a=e.isAdd,l=e.addLoading,s=e.editValue,r=e.roleVisble,u=e.roleData,c=e.functionData,o=e.functionVisble,p=e.roleId,E=e.roleName,v=e.functionId,b=e.functionName;return n.default.createElement("div",{className:"sunm-content sunm-standard-content"},n.default.createElement("div",{className:"sunm-inner-content top"},n.default.createElement("div",{className:"sunm-inner-column"},n.default.createElement("div",{className:"sunm-inner-column-cont"},n.default.createElement(d.default,{onClick:this.changeAddVisible.bind(this,!0)},n.default.createElement(i.default,{type:"plus",className:"sys-icon"}),"\u65b0\u589e\u7528\u6237"),n.default.createElement("div",{className:"table-comment"},this.renderTypeTable(),n.default.createElement("span",null,this.state.pageSize,"\u6761\u6570\u636e")),n.default.createElement(h.default,{isAdd:a,addEditVisible:t,addSubmit:this.addSubmit.bind(this),addLoading:l,handleCancel:this.handleCancel.bind(this),editValue:s}),n.default.createElement(m.default,{visible:r,handleCancel:this.handleCancel.bind(this),roleData:u,id:p,roleName:E}),n.default.createElement(f.default,{visible:o,handleCancel:this.handleCancel.bind(this),functionData:c,id:v,functionName:b})))))}}t.default=b},zUcB:function(e,t,a){"use strict";var l=a("g09b"),s=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(a("q1tI"));a("2qtc");var d=l(a("kLXV")),i=l(a("meRS")),r=l(a("IAP5")),u=a("Nmln"),c=[];class o extends n.Component{constructor(e){super(e),this.handleOK=(()=>{var e=0,t="";e=c.indexOf("5000"),-1!==e&&(t=c.slice(e+5)),console.log("\u4f4d\u7f6e\uff1a"+e+",\u7ed3\u679c\uff1a"+t),(0,u.SaveUserFunction)({accountId:this.state.accountId,rightIds:t||c}).then(e=>{return this.props.handleCancel&&this.props.handleCancel(),e}).then(e=>{this.updataUserRoleDataAction(e)})}),this.updataUserRoleDataAction=(e=>{e.success?d.default.success({title:"\u63d0\u793a\u4fe1\u606f",okText:"\u786e\u5b9a",content:"\u4fdd\u5b58\u8d26\u6237\u3010".concat(this.state.userName,"\u3011\u7684\u529f\u80fd\u6743\u9650\u6210\u529f!")}):d.default.error({title:"\u63d0\u793a\u4fe1\u606f",okText:"\u786e\u5b9a",content:n.default.createElement("div",null,n.default.createElement("p",null,"\u4fdd\u5b58\u8d26\u6237\u3010",this.state.userName,"\u3011\u7684\u529f\u80fd\u6743\u9650\u5931\u8d25!"))})}),this.handleClose=(()=>{this.props.handleCancel&&this.props.handleCancel()}),this.getCheckedNodes=(e=>{c=i.default.notNull(e)?i.default.jointIds(e):""}),this.state={accountId:[],userName:""}}UNSAFE_componentWillReceiveProps(e){this.setState({accountId:e.id,userName:e.functionName})}render(){var e=this.props,t=e.visible,a=e.functionData,l=[{title:"\u6743\u9650\u6a21\u5757",dataKey:"name",width:"60%"},{title:"\u6743\u9650\u7c7b\u578b",dataKey:"type",width:"20%",render:(e,t)=>{return n.default.createElement("div",{className:"divTdRight",style:{width:"20%"}},1==t.type?"\u83dc\u5355":2==t.type?"\u529f\u80fd\u6309\u94ae":9==t.type?"\u5176\u4ed6":"")}},{title:"\u6743\u9650\u72b6\u6001",dataKey:"status",width:"20%",render:(e,t)=>{return n.default.createElement("div",{className:"divTdRight",style:{width:"20%"}},1==t.status?"\u542f\u7528":2==t.status?"\u672a\u542f\u7528":"")}}],s={levels:2,check:!0,columns:l,nodes:i.default.notNull(a)?i.default.arrayDataToTree(a):null,selectTreeId:"",getCheckedNodes:this.getCheckedNodes,scroll:{y:$(window).height()-200},isNeedNodes:!0};return n.default.createElement(d.default,{title:"\u529f\u80fd\u6743\u9650",visible:t,okText:"\u4fdd\u5b58",width:"55%",style:{top:20},onCancel:this.handleClose,destroyOnClose:!0,onOk:this.handleOK},n.default.createElement("div",{style:{minHeight:$(window).height()-200}},i.default.notNull(a)?n.default.createElement(r.default,s):null))}}t.default=o}}]);