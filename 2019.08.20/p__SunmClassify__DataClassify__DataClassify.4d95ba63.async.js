(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[50],{p8bn:function(e,t,a){"use strict";var n=a("g09b"),d=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("T2oS");var l=n(a("W9HT"));a("Pwec");var s=n(a("CtXQ"));a("+L6B");var i=n(a("2/Rp"));a("miYZ");var o=n(a("tsqr")),u=n(a("p0pE")),c=n(a("2Taf")),r=n(a("vZ4D")),f=n(a("l4Ni")),m=n(a("ujKo")),p=n(a("MhPg"));a("g9YV");var h=n(a("wCAj"));a("5NDa");var y,w,C,E=n(a("5rEg")),v=d(a("q1tI")),g=a("MuoO"),b=a("LvDl"),N=(a("Pidj"),n(a("TYXm"))),D=n(a("7umO")),S=n(a("Qyje")),k=(E.default.TextArea,h.default.Column),x=(h.default.ColumnGroup,y=(0,g.connect)(function(e){var t=e.sunmClassify,a=e.loading;return{sunmClassify:t,pageLoading:a.effects["sunmClassify/fetchData"],addLoading:a.effects["sunmClassify/addDataClassify"],editLoading:a.effects["sunmClassify/editDataClassify"],deleteLoading:a.effects["sunmClassify/deleteDataClassify"]}}),y((C=function(e){function t(e){var a;return(0,c.default)(this,t),a=(0,f.default)(this,(0,m.default)(t).call(this,e)),a.getData=function(e,t){e||(1,!0);var n=(0,b.isEmpty)(t)?{}:t;return a.props.dispatch({type:"sunmClassify/fetchData",payload:n})},a.handleSearch=function(){var e=a.state,t=e.params,n=e.keyword;a.setState({params:(0,u.default)({},t,{keyword_temp:n})},function(){a.getData(!1,a.state.params)})},a.handleShowEdit=function(e,t,n,d,l){a.props.dispatch({type:"sunmClassify/fetchEditData",payload:d}),a.setState({editVisible:!0,parentNodeCode:d?d.parentNodeCode:"",nodeValue:d?d.nodeValue:"",modalKey:d?d.nodeCode:"",editTitle:t,isAdd:e,isAddChild:l,treeDisabled:n})},a.handleCloseEdit=function(){a.props.dispatch({type:"sunmClassify/fetchEditData",payload:{}}),a.setState({editVisible:!1,modalKey:1,deleteVisible:!1})},a.handleSave=function(e){var t=a.state,n=t.isAdd,d=t.nodeValue,l={catagoryName:e.nodename,parentId:e.parendcode,catagoryDescrible:e.nodedesc};return n?a.props.dispatch({type:"sunmClassify/addDataClassify",payload:l}).then(function(e){var t=S.default.parse(a.props.location.search.slice(1)),n=t.jump;return"1"===n&&(window.opener.postMessage("Added successfully"),window.close()),a.showTip(e),e}):a.props.dispatch({type:"sunmClassify/editDataClassify",payload:(0,u.default)({id:d},l)}).then(function(e){return a.showTip(e),e})},a.handleShowDelete=function(e){a.setState({deleteVisible:!0,nodeValue:e})},a.handleSaveDelete=function(){var e=a.state.nodeValue,t={id:e};a.props.dispatch({type:"sunmClassify/deleteDataClassify",payload:t}).then(function(e){a.showTip(e)})},a.showTip=function(e){e&&e.success?(a.getData(!1),a.handleCloseEdit(),e.msg&&o.default.success(e.msg)):e&&o.default.error(e.msg)},a.onExpandedRowsChange=function(e){a.setState({expandedRowKeys:e})},a.expandAllRows=function(e){e?(a.expandedRowKeys||(a.expandedRowKeys=[],a.getRow(a.props.sunmClassify.dataList.list)),a.setState({expandedRowKeys:a.expandedRowKeys})):a.setState({expandedRowKeys:[]})},a.getRow=function(e){var t=!0,n=!1,d=void 0;try{for(var l,s=e[Symbol.iterator]();!(t=(l=s.next()).done);t=!0){var i=l.value;i.children&&(a.expandedRowKeys.push(i.nodeCode),a.getRow(i.children))}}catch(e){n=!0,d=e}finally{try{t||null==s.return||s.return()}finally{if(n)throw d}}},a.state={btnloading:!1,editVisible:!1,deleteVisible:!1,modalKey:1,rowActive:"-1",parentNodeCode:"",nodeValue:null,nodeName:"",isAdd:!0,isAddChild:!1,editTitle:"",keyword:"",keyword_temp:"",treeDisabled:!1,showCode:!1,expandedRowKeys:[]},a}return(0,p.default)(t,e),(0,r.default)(t,[{key:"componentDidMount",value:function(){this.getData(!1);var e=S.default.parse(this.props.location.search.slice(1)),t=e.jump;"1"===t&&this.handleShowEdit(!0,"\u65b0\u589e\u6570\u636e\u9879\u5206\u7c7b")}},{key:"renderSearchList",value:function(){var e=this;this.props.addLoading;return v.default.createElement("div",{className:"search-list"},v.default.createElement("div",{className:"item"},v.default.createElement(i.default,{className:"sunm-handle-btn",onClick:this.expandAllRows.bind(this,!0)},"\u5168\u90e8\u5c55\u5f00"),v.default.createElement(i.default,{className:"sunm-handle-btn",onClick:this.expandAllRows.bind(this,!1)},"\u5168\u90e8\u6536\u8d77"),v.default.createElement(i.default,{className:"sunm-handle-btn",icon:"plus",onClick:function(){e.handleShowEdit(!0,"\u65b0\u589e\u6570\u636e\u9879\u5206\u7c7b")}},v.default.createElement("span",{className:"handle-text"},"\u65b0\u589e"))))}},{key:"renderTypeTable",value:function(e){var t=this;return e.list&&e.list.length>0?v.default.createElement(h.default,{scroll:{y:550},pagination:!1,id:"sunm-type-table",expandedRowKeys:this.state.expandedRowKeys,onExpandedRowsChange:this.onExpandedRowsChange,className:"sunm-table sunm-table-head-fixed",dataSource:e.list,rowKey:"nodeCode",rowClassName:function(e){return e.nodeCode==t.state.rowActive?"sunm-row-active":""},onRow:function(e){return{onClick:function(){t.setState({rowActive:e.nodeCode})}}}},v.default.createElement(k,{className:"column",title:"\u5206\u7c7b\u540d\u79f0",key:"name",render:function(e){return v.default.createElement("a",{title:e.nodeName},e.nodeName)}}),v.default.createElement(k,{className:"column column-desc",title:"\u63cf\u8ff0",key:"desc",width:"38%",render:function(e){return v.default.createElement("a",{title:e.nodeDescrible},e.nodeDescrible)}}),v.default.createElement(k,{className:"column sunm-text-center",title:"\u64cd\u4f5c",key:"action",width:"20%",render:function(e,a,n){return 0==a.nodeCode?"":v.default.createElement("span",null,v.default.createElement("a",{className:"sunm-icon sunm-edit-icon",title:"\u6dfb\u52a0\u540c\u7ea7",onClick:function(){t.handleShowEdit(!0,"\u6dfb\u52a0\u540c\u7ea7",!0,a)}},v.default.createElement("i",{className:"iconfont icon-tianjiatongji"})),v.default.createElement("a",{className:"sunm-icon sunm-edit-icon",title:"\u6dfb\u52a0\u5b50\u7ea7",onClick:function(){t.handleShowEdit(!0,"\u6dfb\u52a0\u5b50\u7ea7",!0,a,!0)}},v.default.createElement("i",{className:"iconfont icon-tianjiaziji"})),v.default.createElement("a",{className:"sunm-icon sunm-edit-icon",title:"\u7f16\u8f91",onClick:function(){t.handleShowEdit(!1,"\u7f16\u8f91\u8868\u5206\u7c7b",!0,a)}},v.default.createElement(s.default,{type:"form"})),a.children&&a.children.length>0?v.default.createElement("span",{className:"sunm-icon",style:{color:"#ddd"}},v.default.createElement(s.default,{type:"delete"})):v.default.createElement("a",{className:"sunm-icon sunm-delete-icon",title:"\u5220\u9664",onClick:function(){return t.handleShowDelete(a.nodeValue)}},v.default.createElement(s.default,{type:"delete"})))}})):v.default.createElement("div",{style:{textAlign:"center",padding:"200px 0",fontSize:16}})}},{key:"renderDelete",value:function(e){return v.default.createElement("span",null,"\u786e\u5b9a\u8981\u5220\u9664",v.default.createElement("i",{className:"delete-data"},e),"\u8fd9\u4e2a\u5206\u7c7b\u5417\uff1f")}},{key:"render",value:function(){var e=this,t=this.state,a=t.editVisible,n=t.deleteVisible,d=t.nodeName,s=t.modalKey,i=t.isAdd,o=t.isAddChild,u=t.treeDisabled,c=t.editTitle,r=this.props,f=r.sunmClassify,m=r.pageLoading,p=r.addLoading,h=r.editLoading,y=r.deleteLoading,w=f.dataList,C=f.editData,E=f.dataClassify;return v.default.createElement("div",{className:"sunm-content sunm-classify-content"},v.default.createElement("div",{className:"sunm-inner-content top"},v.default.createElement("div",{className:"sunm-inner-column"},v.default.createElement("div",{className:"sunm-inner-column-cont"},this.renderSearchList(),v.default.createElement("div",{className:"table-cont"},m?v.default.createElement(l.default,{style:{display:"block",padding:"200px 0"}}):this.renderTypeTable(w))))),v.default.createElement(N.default,{showCode:this.state.showCode,title:c,Key:s,visible:a,isAdd:i,dataList:E,editData:C,treeDisabled:u,btnloading:p||h,isAddChild:o,submit:function(t){return e.handleSave(t)},onClose:this.handleCloseEdit}),v.default.createElement(D.default,{hideHeader:"sunm-modal-head-hide",visible:n,title:"\u5220\u9664\u63d0\u793a",btnloading:y,ok:function(){e.handleSaveDelete()},cancel:this.handleCloseEdit,content:this.renderDelete(d)}))}}]),t}(v.Component),w=C))||w);t.default=x}}]);