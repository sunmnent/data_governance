(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[53],{Aonx:function(e,t,a){"use strict";var n=a("tAuX"),l=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("+L6B");var i,d=l(a("2/Rp")),o=l(a("2Taf")),s=l(a("vZ4D")),r=l(a("l4Ni")),u=l(a("ujKo")),c=l(a("MhPg")),f=n(a("q1tI")),m=l(a("0Dzg")),p=a("7DNP"),h=a("MuoO"),y=!1,C=1,g=["rgb(81, 114, 147)","rgb(245, 107, 132)","rgb(81, 144, 17)","rgb(48, 163, 192)","rgb(204, 126, 176)","rgb(204, 129, 126)"],v=function(e){function t(e){var a;return(0,o.default)(this,t),a=(0,r.default)(this,(0,u.default)(t).call(this,e)),a.add=function(){a.props.handleShowEdit(!0,"\u65b0\u589e\u8868\u5206\u7c7b")},a.dealData=function(e,t){var n=a.props.expand,l=void 0===n?"":n;e.forEach(function(e,n){var i=t||g[n%g.length];e.nodeName===l?e.isCollapsed=!1:e.children&&e.children.find(function(e){return e.nodeName===l})?e.isCollapsed=!1:e.isCollapsed=!0,e.color=i,e.children?a.dealData(e.children,i):e.tableModels&&(e.children=e.tableModels,a.dealData(e.children,i))})},a.renderCharts=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=a.props.data,n=void 0===t?{}:t;n.children&&a.dealData(n.children),i=new m.default.Tree(Object.assign({id:"tree",height:600,fitView:"cc",layoutCfg:{getHGap:function(){return 100},getVGap:function(){return 10}}},e)),i.source(n),i.node().label(function(e){return{text:e.nodeName||e.tableNameCn,fill:"white"}}).style({fillOpacity:1}).color("rgb(53, 152, 219)"),i.edge().shape("smooth"),i.render(),i.on("click",function(e){var t=e.shape;if(t){var n=i.find(t.__cfg.id);if(t.hasClass("spreadoutButton")){var l=n._attrs.model.children,d=l[parseInt(l.length/2)];i.focusPoint({x:d.x,y:d.y})}else t.hasClass("collapseButton")&&i.focusPoint({x:n._attrs.model.x,y:n._attrs.model.y})}"node"==e.itemType&&e.item._attrs.model&&e.item._attrs.model.nodeName?a.setState({posiTop:e.domY,posiLeft:e.domX,dataOperate:e.item._attrs.model,forwardValue:e.item._attrs.model.nodeValue},function(){a.setState({isOperate:"block"})}):a.setState({isOperate:"none"})})},a.zoomIn=function(){C<3&&(C+=.1,i.zoom(Number(C)))},a.zoomOut=function(){C>.2&&(C-=.1,i.zoom(Number(C)))},a.autoZoom=function(){y=!y,i.destroy(),y?a.renderCharts({fitView:"autoZoom"}):a.renderCharts()},a.state={checkboxs:{},selectKeys:[],posiTop:0,posiLeft:0,isOperate:"none",dataOperate:null,forwardValue:""},a}return(0,c.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){this.renderCharts()}},{key:"routerForward",value:function(){this.props.dispatch(p.routerRedux.push("/modelManagement/masterdata/".concat(this.state.forwardValue)))}},{key:"render",value:function(){var e=this,t=this.props,a=t.handleShowEdit,n=t.handleShowDelete,l=this.state,i=l.isOperate,o=l.posiTop,s=l.posiLeft,r=l.dataOperate,u=l.forwardValue;return f.default.createElement("div",null,f.default.createElement(d.default,{size:"small",icon:"plus",style:{position:"absolute",left:10,zIndex:8},onClick:this.add},"\u65b0\u589e"),f.default.createElement("span",{style:{position:"absolute",right:10,zIndex:8}},f.default.createElement("i",{title:"\u653e\u5927",className:"icon animate sm iconfont icon-fangda1 margin-top4 margin-right10",onClick:this.zoomIn}),f.default.createElement("i",{title:"\u7f29\u5c0f",className:"icon animate sm iconfont icon-suoxiao margin-top4 margin-right10",onClick:this.zoomOut}),f.default.createElement("i",{title:"\u81ea\u9002\u5e94\u7a97\u53e3",className:"icon animate sm iconfont icon-zishiying1 margin-top4 margin-right10",onClick:this.autoZoom})),f.default.createElement("div",null,f.default.createElement("div",{id:"tree"})),f.default.createElement("ul",{className:"operationList",style:{display:i,top:o,left:s}},"0"!==u&&f.default.createElement("li",{onClick:function(){a(!0,"\u6dfb\u52a0\u540c\u7ea7",!0,r)}},"\u6dfb\u52a0\u540c\u7ea7"),f.default.createElement("li",{onClick:function(){a(!0,"\u6dfb\u52a0\u5b50\u7ea7",!0,r,!0)}},"\u6dfb\u52a0\u5b50\u7ea7"),"0"!==u&&f.default.createElement("li",{onClick:function(){a(!1,"\u7f16\u8f91\u8868\u5206\u7c7b",!0,r)}},"\u7f16\u8f91\u8868\u5206\u7c7b"),f.default.createElement("li",{onClick:function(){e.routerForward()}},"\u67e5\u770b\u8868\u95f4\u5173\u7cfb"),r&&(r.children&&r.children.length>0?null:f.default.createElement("li",{onClick:function(){return n(r)}},"\u5220\u9664"))))}}]),t}(f.Component),E=(0,h.connect)()(v);t.default=E},TDIP:function(e,t,a){},kUqd:function(e,t,a){"use strict";var n=a("tAuX"),l=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=l(a("2Taf")),d=l(a("vZ4D")),o=l(a("l4Ni")),s=l(a("ujKo")),r=l(a("MhPg"));a("+L6B");var u=l(a("2/Rp"));a("Znn+");var c=l(a("ZTPi")),f=n(a("q1tI")),m=l(a("Qyje")),p=a("MuoO"),h=a("7DNP"),y=l(a("kfli")),C=l(a("4QS/")),g=c.default.TabPane,v=(0,p.connect)()(function(e){var t=function(){e.dispatch(h.routerRedux.goBack())};return f.default.createElement(u.default,{onClick:t},"\u8fd4\u56de")}),E=function(e){function t(){return(0,i.default)(this,t),(0,o.default)(this,(0,s.default)(t).apply(this,arguments))}return(0,r.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=m.default.parse(this.props.location.search.slice(1)),t=e.expand;return f.default.createElement(c.default,{defaultActiveKey:"1",tabBarExtraContent:f.default.createElement(v,null),style:{marginTop:"-10px"}},f.default.createElement(g,{tab:"\u56fe\u5f62",key:"1"},f.default.createElement(y.default,{expand:t})),f.default.createElement(g,{tab:"\u5217\u8868",key:"2"},f.default.createElement(C.default,{type:1})))}}]),t}(f.Component),b=E;t.default=b},kfli:function(e,t,a){"use strict";var n=a("g09b"),l=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("T2oS");var i=n(a("W9HT"));a("Pwec");var d=n(a("CtXQ"));a("+L6B");var o=n(a("2/Rp"));a("miYZ");var s=n(a("tsqr")),r=n(a("p0pE"));a("5NDa");var u=n(a("5rEg")),c=n(a("2Taf")),f=n(a("vZ4D")),m=n(a("l4Ni")),p=n(a("ujKo")),h=n(a("MhPg"));a("g9YV");var y,C,g,v=n(a("wCAj")),E=l(a("q1tI")),b=a("MuoO"),w=a("LvDl"),N=n(a("TYXm")),k=n(a("Aonx")),D=n(a("7umO"));a("cJfE"),a("3MCO"),a("xR6b"),a("TDIP");var T=v.default.Column,S=(v.default.ColumnGroup,E.Component,y=(0,b.connect)(function(e){var t=e.sunmClassify,a=e.loading;return{sunmClassify:t,pageLoading:a.effects["sunmClassify/fetchTable"],addLoading:a.effects["sunmClassify/addTableClassify"],editLoading:a.effects["sunmClassify/editTableClassify"],deleteLoading:a.effects["sunmClassify/deleteTableClassify"]}}),y((g=function(e){function t(e){var a;return(0,c.default)(this,t),a=(0,m.default)(this,(0,p.default)(t).call(this,e)),a.getData=function(e,t){e||(1,!0);var n=(0,w.isEmpty)(t)?{}:t;return a.props.dispatch({type:"sunmClassify/fetchTable",payload:n})},a.handleSearch=function(){var e=a.state,t=e.params,n=e.keyword;a.setState({params:(0,r.default)({},t,{keyword_temp:n})},function(){a.getData(!1,a.state.params)})},a.handleShowEdit=function(e,t,n,l,i){a.props.dispatch({type:"sunmClassify/fetchEditData",payload:l}),a.setState({editVisible:!0,parentNodeCode:l?l.parentNodeCode:"",nodeValue:l?l.nodeValue:"",modalKey:l?l.nodeCode:"",editTitle:t,isAdd:e,isAddChild:i,treeDisabled:n})},a.handleCloseEdit=function(){a.setState({editVisible:!1,modalKey:1,deleteVisible:!1})},a.handleSave=function(e){var t=a.state,n=t.isAdd,l=t.nodeValue,i={catagoryName:e.nodename,parentId:e.parendcode,catagoryDescrible:e.nodedesc};return n?a.props.dispatch({type:"sunmClassify/addTableClassify",payload:i}).then(function(e){return a.props.dispatch({type:"sunmQualityControl/getCategoryData"}),a.showTip(e),e}):a.props.dispatch({type:"sunmClassify/editTableClassify",payload:(0,r.default)({id:l},i)}).then(function(e){return a.props.dispatch({type:"sunmQualityControl/getCategoryData"}),a.showTip(e),e})},a.handleShowDelete=function(e){a.setState({deleteVisible:!0,nodeValue:e.nodeValue})},a.handleSaveDelete=function(){var e=a.state.nodeValue,t={id:e};a.props.dispatch({type:"sunmClassify/deleteTableClassify",payload:t}).then(function(e){a.props.dispatch({type:"sunmQualityControl/getCategoryData"}),a.showTip(e)})},a.showTip=function(e){e&&e.success?(a.getData(!1),a.handleCloseEdit(),e.msg&&s.default.success(e.msg)):e&&s.default.error(e.msg)},a.state={btnloading:!1,editVisible:!1,deleteVisible:!1,modalKey:1,rowActive:"-1",parentNodeCode:"",nodeValue:null,nodeName:"",isAdd:!0,isAddChild:!1,editTitle:"",keyword:"",keyword_temp:"",treeDisabled:!1,showCode:!1},a}return(0,h.default)(t,e),(0,f.default)(t,[{key:"componentDidMount",value:function(){this.getData(!1)}},{key:"renderSearchList",value:function(){var e=this;this.props.addLoading;return E.default.createElement("div",{className:"search-list"},E.default.createElement("div",{className:"item"},E.default.createElement(o.default,{type:"button",className:"sunm-handle-btn",icon:"plus",onClick:function(){e.handleShowEdit(!0,"\u65b0\u589e\u8868\u5206\u7c7b")}},E.default.createElement("span",{className:"handle-text"},"\u65b0\u589e"))))}},{key:"renderTypeTable",value:function(e){var t=this;return e.list&&e.list.length>0?E.default.createElement(v.default,{scroll:{y:550},pagination:!1,id:"sunm-type-table",defaultExpandAllRows:!0,className:"sunm-table sunm-table-head-fixed",dataSource:e.list,rowKey:"nodeCode",rowClassName:function(e){return e.nodeCode==t.state.rowActive?"sunm-row-active":""},onRow:function(e){return{onClick:function(){t.setState({rowActive:e.nodeCode})}}}},E.default.createElement(T,{className:"column",title:"\u5206\u7c7b\u540d\u79f0",key:"name",render:function(e){return E.default.createElement("a",{title:e.nodeName},e.nodeName)}}),E.default.createElement(T,{className:"column column-desc",title:"\u63cf\u8ff0",key:"desc",width:"38%",render:function(e){return E.default.createElement("a",{title:e.nodeDescrible},e.nodeDescrible)}}),E.default.createElement(T,{className:"column sunm-text-center",title:"\u64cd\u4f5c",key:"action",width:"20%",render:function(e,a,n){return 0==a.nodeCode?"":E.default.createElement("span",null,E.default.createElement("a",{className:"sunm-icon sunm-edit-icon",title:"\u6dfb\u52a0\u540c\u7ea7",onClick:function(){t.handleShowEdit(!0,"\u6dfb\u52a0\u540c\u7ea7",!0,a)}},E.default.createElement("i",{className:"iconfont icon-tianjiatongji"})),E.default.createElement("a",{className:"sunm-icon sunm-edit-icon",title:"\u6dfb\u52a0\u5b50\u7ea7",onClick:function(){t.handleShowEdit(!0,"\u6dfb\u52a0\u5b50\u7ea7",!0,a,!0)}},E.default.createElement("i",{className:"iconfont icon-tianjiaziji"})),E.default.createElement("a",{className:"sunm-icon sunm-edit-icon",title:"\u7f16\u8f91",onClick:function(){t.handleShowEdit(!1,"\u7f16\u8f91\u8868\u5206\u7c7b",!0,a)}},E.default.createElement(d.default,{type:"form"})),a.children&&a.children.length>0?E.default.createElement("span",{className:"sunm-icon",style:{color:"#ddd"}},E.default.createElement(d.default,{type:"delete"})):E.default.createElement("a",{className:"sunm-icon sunm-delete-icon",title:"\u5220\u9664",onClick:function(){return t.handleShowDelete(a)}},E.default.createElement(d.default,{type:"delete"})))}})):E.default.createElement("div",{style:{textAlign:"center",padding:"200px 0",fontSize:16}})}},{key:"renderDelete",value:function(e){return E.default.createElement("span",null,"\u786e\u5b9a\u8981\u5220\u9664",e,"\u8fd9\u4e2a\u5206\u7c7b\u5417\uff1f")}},{key:"render",value:function(){var e=this,t=this.state,a=t.editVisible,n=t.deleteVisible,l=t.nodeName,d=t.modalKey,o=t.isAdd,s=t.isAddChild,r=t.treeDisabled,u=t.editTitle,c=this.props,f=c.sunmClassify,m=c.pageLoading,p=c.addLoading,h=c.editLoading,y=c.deleteLoading,C=c.expand,g=(f.tableList,f.editData),v=f.tableClassify;return E.default.createElement("div",{className:"sunm-content sunm-classify-content"},E.default.createElement("div",{className:"sunm-inner-content top"},E.default.createElement("div",{className:"sunm-inner-column"},E.default.createElement("div",{className:"sunm-inner-column-cont"},E.default.createElement("div",{className:"table-cont"},m?E.default.createElement(i.default,{style:{display:"block",padding:"200px 0"}}):E.default.createElement(k.default,{data:v[0],handleShowEdit:this.handleShowEdit,handleShowDelete:this.handleShowDelete,ref:"renderCharts",expand:C}))))),E.default.createElement(N.default,{showCode:this.state.showCode,title:u,Key:d,visible:a,isAdd:o,dataList:v,editData:g,treeDisabled:r,btnloading:p||h,isAddChild:s,submit:function(t){return e.handleSave(t)},onClose:this.handleCloseEdit}),E.default.createElement(D.default,{hideHeader:"sunm-modal-head-hide",visible:n,title:"\u5220\u9664\u63d0\u793a",btnloading:y,ok:function(){e.handleSaveDelete()},cancel:this.handleCloseEdit,content:this.renderDelete(l)}))}}]),t}(E.Component),C=g))||C);t.default=S}}]);